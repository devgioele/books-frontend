{"version":3,"sources":["theming/index.js","utils/environment.js","hooks/auth.js","components/ProvideAuth/ProvideAuth.jsx","components/routing/ProtectedRoute/ProtectedRoute.jsx","components/routing/GuestRoute/GuestRoute.jsx","routing/privileges.js","routing/helpers.js","components/routing/Routes/Routes.jsx","components/landing/FeatureCard/FeatureCard.jsx","components/VerticalRectangular/VerticalRectangular.jsx","components/BookCard/BookCard.jsx","components/landing/SearchResults/SearchResults.jsx","components/landing/SearchBar/SearchBar.jsx","api/base.js","api/landing.js","messages/standard.js","utils/constants.js","hooks/axios.js","utils/functions.js","components/landing/LandingSearch/LandingSearch.jsx","components/CloudImage/CloudImage.jsx","components/landing/LandingWelcome/LandingWelcome.jsx","components/landing/LandingHeader/LandingHeader.jsx","components/landing/LandingAbout/LandingAbout.jsx","components/landing/LandingCredits/LandingCredits.jsx","screens/Landing/Landing.jsx","api/books.js","components/explore/ExploreSearch/ExploreSearch.jsx","components/explore/PopularBooks/PopularBooks.jsx","components/explore/BooksGallery/BooksGallery.jsx","components/explore/ExploreWelcome/ExploreWelcome.jsx","screens/Explore/Explore.jsx","components/explore/MayInterestYouBooks/MayInterestYouBooks.jsx","components/explore/RecentlyViewedBooks/RecentlyViewedBooks.jsx","utils/dates.js","components/SellBooksList/SellBooksList.jsx","components/ConfirmationDialog/ConfirmationDialog.jsx","screens/Sell/Sell.jsx","components/profile/ProfileTypography/ProfileTypography.jsx","components/profile/ProfileHeader/ProfileHeader.jsx","components/profile/ProfileInformation/ProfileInformation.jsx","api/profile.js","components/profile/CompleteProfileBanner/CompleteProfileBanner.jsx","api/auth.js","components/PasswordField/PasswordField.jsx","components/profile/ProfileSecurity/ProfileSecurity.jsx","screens/Profile/Profile.jsx","components/book/BookImages/BookImages.jsx","components/book/BookDetails/BookDetails.jsx","components/book/BookSellerDetails/BookSellerDetails.jsx","components/DynamicAppBar/DynamicAppBar.jsx","components/ContentWithToolbar/ContentWithToolbar.jsx","screens/Book/Book.jsx","components/DrawerLeft/DrawerLeft.jsx","components/SimpleBottomNavigation/SimpleBottomNavigation.jsx","components/Navigation/Navigation.jsx","utils/routing.js","screens/Authorization/authProgress.js","components/login/LoginHeader/LoginHeader.jsx","components/login/IdentityForm/IdentityForm.jsx","components/login/SignupForm/SignupForm.jsx","components/login/LoginForm/LoginForm.jsx","components/login/AuthForm/AuthForm.jsx","screens/Authorization/Authorization.jsx","components/ImageUploader/ImageUploader.jsx","components/ImageDropzone/ImageDropzone.jsx","api/currencies.js","components/BookEditSellDialog/BookEditSellDialog.jsx","components/ConfirmCard/ConfirmCard.jsx","screens/Confirm/Confirm.jsx","routing/index.js","screens/Dashboard/Dashboard.jsx","components/BookLinkDialog/BookLinkDialog.jsx","components/profile/EditProfileDialog/EditProfileDialog.jsx","components/profile/EditProfilePictureDialog/EditProfilePictureDialog.jsx","Main.jsx","index.js"],"names":["themedBorderRadius","responsiveFontSizes","createMuiTheme","breakpoints","values","xs","sm","smmd","md","lg","xl","palette","primary","main","secondary","light","custom","black","shadowGray","linkBlue","lightGrey","facebook","telegram","typography","h1","fontFamily","h2","h3","h4","h5","h6","body1","body2","subtitle1","subtitle2","overrides","MuiButton","root","borderRadius","MuiFilledInput","MuiOutlinedInput","mixins","toolbarDrawer","minHeight","maxHeight","navigator","pageFrame","theme","up","padding","LOCAL_STORAGE_TOKEN_KEY","localStorageAuth","onSuccess","token","localStorage","setItem","removeItem","getItem","authContext","createContext","useAuth","useContext","ProvideAuth","children","auth","useState","setToken","isLoggedIn","login","serverToken","savedToken","logout","useProvideAuth","Provider","value","ProtectedRoute","render","rest","props","to","pathname","AUTH_ROUTE","state","from","location","GuestRoute","EXPLORE_ROUTE","RoutePrivileges","ANYONE","GUEST","AUTHENTICATED","APP_ROUTE","BOOK_ROUTE","DASHBOARD_ROUTE","SELL_ROUTE","NEW_SELL_ROUTE","EDIT_SELL_ROUTE","REMOVE_SELL_ROUTE","LINK_SELL_ROUTE","PROFILE_ROUTE","EDIT_PROFILE_ROUTE","EDIT_PROFILE_PICTURE_ROUTE","toRoute","routeName","renderRoute","route","extraProps","privilege","exact","isExact","path","component","routes","Routes","map","useStyles","makeStyles","avatar","position","color","dark","backgroundColor","FeatureCard","icon","title","description","classes","Grid","container","direction","justify","alignItems","spacing","item","Avatar","className","Typography","variant","align","child","objectFit","VerticalRectangular","React","Children","cloneElement","clsx","style","bookCover","width","height","boxShadow","BookCard","book","src","pictures","alt","Link","onClick","event","preventDefault","href","isbn","condition","currency","amount","searchResults","marginTop","SearchResults","books","showSignup","history","useHistory","Paper","index","push","bookId","Divider","SeeMore","Button","disableElevation","inputRoot","fontSize","inputInput","paddingLeft","search","marginRight","marginLeft","searchIconContainer","pointerEvents","display","justifyContent","loadingIndicatorContainer","searchIcon","fade","SearchBar","onSearching","isLoading","CircularProgress","disableShrink","size","thickness","SearchRounded","InputBase","placeholder","input","inputProps","onChange","target","BASE_URL","successWith","onFailure","successStatusCodes","response","includes","status","data","body","failureWith","expectedStatusCodes","error","axios","isCancel","expected","withAuth","config","headers","Authorization","landingSearchBy","cancelToken","searchQuery","get","params","then","catch","StdMessages","CONTACT_SUPPORT","UNEXPECTED","operation","NETWORK_ERROR","MAX_NUMBER_IMAGES","INVALID_FORMAT","UNSUPPORTED_FORMAT","SIGNUP_DONE","CURRENCIES_ERROR","createEnum","enumObject","val","Object","freeze","bookConditions","uploadProgress","axiosState","fillingState","computeFillingState","min","max","full","notEnough","enough","isNetworkError","isAxiosError","useAxios","axiosBlock","operationName","onExpectedError","undefined","setData","setError","setIsLoading","source","setSource","useSnackbar","enqueueSnackbar","fetch","localSource","CancelToken","args","err","errorDetail","detail","cancelPrevious","cancel","debounce","func","timeout","timer","clearTimeout","setTimeout","apply","getFromObject","object","key","split","reduce","prevObject","currentKey","isObject","Array","isArray","mergeDeep","sources","length","shift","assign","imprintObject","keys","imprintedObj","singleKey","pop","currentObject","forEach","deriveObject","searchCard","LandingSearch","hideSearch","setHideSearch","handleSearch","query","showSearchResults","ClickAwayListener","onClickAway","CloudImage","url","cutExtension","onLoad","remProps","imgProps","setImgProps","validUrl","slice","lastIndexOf","srcSet","type","onError","margin","flexWrap","illustrationContainer","textAlign","illustration","minWidth","maxWidth","welcomeMsg","LandingWelcome","upSmallMedium","useMediaQuery","logo","button","LandingHeader","changePage","image","people","name","img","role","LandingAbout","downXSmall","down","person","Person","creditsCollection","list","refLabel","ref","LandingCredits","showDialog","setShowDialog","CreditsDialog","open","onClose","fullWidth","startIcon","useTheme","downSmall","innerTheme","Dialog","fullScreen","DialogContent","credits","credit","creditIndex","rel","DialogActions","features","page","sectionTitle","fontWeight","searchBar","exploreBooks","searchBookBy","getSellingBooks","getSoldBooks","sellBook","newBook","post","editBook","put","removeBook","delete","uploadBookImage","file","fd","FormData","append","getSellLink","confirmSell","transactionId","getBookByTransaction","getBookById","bookCard","bookTitle","PopularBook","bookPrice","BooksGallery","Book","girlAnimation","sections","autoplay","loop","keepLastFrame","girlTappingPhone","getBooks","popular","mayInterestYou","recentlyViewed","interval","animation","navButtonsAlwaysInvisible","Section","section","fExploreBooks","cExploreBooks","useEffect","sectionContainsBooks","formatStringDate","date","Date","toLocaleString","weekday","year","month","day","sectionGrid","sectionHeader","marginBottom","bookContainer","background","paper","borderWidth","borderColor","divider","borderStyle","sellButton","success","editButton","removeButton","sellingText","soldText","textDecoration","skeletonCover","skeletonTitle","skeletonSubtitle","SellBooksList","loadingSelling","loadingSold","sellingBooks","soldBooks","onEdit","onRemove","onSellLink","isSold","showSection","every","bookBounceOpen","filter","sectionIndex","SkeletonBook","bookIndex","openBook","buyer","saleDate","publicationDate","Skeleton","sanitizeEvent","block","stopPropagation","ConfirmationDialog","details","onCancel","onConfirm","loadingCancellable","PaperProps","DialogTitle","DialogContentText","disabled","fab","bottom","ProfileTypography","text","errorText","show","successVariant","errorVariant","ProfileHeader","fields","mouseOnAvatar","setMouseOnAvatar","username","surname","picture","onMouseOver","onMouseLeave","ProfileInformation","field","displayName","getProfileDetails","getProfileDetailsById","userId","editProfile","profileDetails","uploadProfilePicture","removeProfilePicture","card","animationSmall","CompleteProfileBanner","progress","profilePasswordUnlock","CustomLinearProgress","withStyles","colorPrimary","grey","bar","LinearProgress","changePassword","oldPassword","newPassword","checkIdentity","usernameOrEmail","signup","newUser","email","password","PasswordField","autoComplete","autoFocus","defaultValue","FormHelperTextProps","helperText","id","hiddenLabel","InputLabelProps","label","InputProps","multiline","onBlur","onFocus","required","rows","rowsMax","SelectProps","other","inputRef","useRef","selectionStart","setSelectionStart","setPassword","showPassword","setShowPassword","helperTextId","inputLabelId","FormControl","onSelect","current","InputLabel","htmlFor","OutlinedInput","aria-describedby","endAdornment","InputAdornment","IconButton","aria-label","onMouseDown","edge","Visibility","VisibilityOff","FormHelperText","ProfileSecurity","setOldPassword","setNewPassword","fChangePassword","cChangePassword","changePasswordError","isChangingPassword","profileFields","showInHeader","showInEditDialog","space","isRequired","BookImages","BookDetails","contactInformation","window","phone","customButton","textColor","emailButton","phoneButton","telegramButton","facebookButton","BookSellerDetails","fGetProfileDetailsById","cGetProfileDetailsById","seller","isLoadingUser","profilePicture","ContactInformation","contactInfo","appBarBottomNavigation","appBarDrawer","drawerWidth","DynamicAppBar","showBack","scrollTriggerHide","useScrollTrigger","threshold","disableHysteresis","scrollTriggerShadow","Slide","appear","in","AppBar","elevation","Toolbar","goBack","noWrap","ExitToAppRounded","toolbarPlaceholder","toolbar","contentContainer","flexGrow","default","content","ContentWithToolbar","hasBottomNavigation","paddingBottom","drawer","flexShrink","drawerPaper","selectedSection","DrawerLeft","changeSection","Drawer","anchor","List","ListItem","selected","ListItemIcon","ListItemText","navTheme","zIndex","SimpleBottomNavigation","selectedIndex","BottomNavigation","newIndex","BottomNavigationAction","LocalLibraryRounded","MonetizationOnRounded","AccountCircleRounded","Navigation","selectedRoute","useMemo","findIndex","ancestor","startsWith","downSmallMedium","AuthProgress","IDENTITY","LOGIN","SIGNUP","renderText","LoginHeader","textField","btn","IdentityForm","onProgress","setUsernameOrEmail","invalid","setInvalid","btnContinue","fetchedData","doCheckIdentity","cancelCheckIdentity","onKeyPress","e","click","TextField","exactMatch","regex","matches","match","SignupForm","redirect","isEmail","initEmail","initUsername","passwordConfirmed","setNewUser","updateNewUser","fieldName","doSignup","cancelSignup","LoginForm","current-password","AuthForm","loginCard","iconContainer","overflow","gridList","imgContainer","flexDirection","imgLoading","opacity","ImageUploader","droppedImages","onUploadStateChange","uploadEndpoint","cols","preferDownload","removeSource","sourceToRemove","addSource","sourceToAdd","onStateChange","sourcesCopy","useStatelessAxios","uploadImage","cancelAllUploads","waiting","uploadImageGuarded","GridList","cellHeight","GridListTile","DroppedImage","remove","abort","secureUrl","altFromStatus","imageStatus","uploaded","uploading","downloaded","setDownloaded","showRemove","setShowRemove","handleClick","downloadRequired","loading","URL","createObjectURL","dropzone","outline","dropzoneNotEnough","red","dropzoneNotEnoughHover","dropzoneNotEnoughDrag","dropzoneDrag","ImageDropzone","minImages","maxImages","explanation","pictureUrls","addPictureUrl","removePictureUrl","setBlocked","gridListArgs","useReducer","x","forceUpdate","pictureUrl","filling","setFilling","newFilling","some","rejectFiles","files","nameExtractor","reason","newUniqueDroppedImageId","removeDroppedImage","imageId","changeDroppedImage","newImageProps","useDropzone","onDrop","acceptedFiles","fileRejections","images","freeSlots","importingImages","overflowedImages","dropImages","accept","getRootProps","getInputProps","isDragActive","imgName","getDroppedImageName","loadCurrencies","unwrapEventValue","BookEditSellDialog","backToParent","bookToEdit","upSmall","upLarge","evaluateNumColumns","isBlocked","currenciesYetToFetch","setCurrenciesYetToFetch","fetchCurrencies","cancelCurrencies","currencies","isLoadingCurrencies","defaultCondition","ok","currentBook","setNewBook","updateBook","bookGen","defaultCurrencyLabel","symbol","newDefaultSymbol","newDefaultCurrency","sell","isLoadingSell","edit","isLoadingEdit","handleCancel","urlToAdd","urlToRemove","Autocomplete","renderInput","options","parseFloat","locationName","currentBookWithPictures","cardButton","ConfirmCard","bookError","confirm","confirmError","isLoadingBook","isLoadingConfirm","onRetry","Error","Success","RoutePrivilege","feature","useParams","fGetBookByTransaction","cGetBookByTransaction","fConfirmSell","cConfirmSell","useLocation","COMPILATION_PROGRESS","setProgress","replace","fGetBookById","cGetBookById","newSection","transitionDuration","enter","transitions","duration","enteringScreen","exit","leavingScreen","setBookToEdit","bookToRemove","setBookToRemove","bookToLink","setBookToLink","newSellRoute","editSellRoute","removeSellRoute","linkSellRoute","fetchSellingBooks","cancelSelling","isLoadingSelling","fetchSoldBooks","cancelSold","isLoadingSold","doRefresh","Zoom","transitionDelay","unmountOnExit","Fab","cancelRemoval","isLoadingRemoval","link","setLink","linkFieldRef","linkData","focus","generateLink","cancelGeneration","isGenerating","green","Box","m","readOnly","select","document","execCommand","fGetProfileDetails","cGetProfileDetails","isLoadingProfileDetails","editProfileRoute","editProfilePictureRoute","zippedData","setZippedData","completePercentage","setCompletePercentage","validFields","acc","_","parseInt","computeMissingFields","backToProfile","refresh","isDataLoaded","isProtected","buildObjectFromFields","setProfileDetails","fEditProfile","cleanProfileDetails","doRemovePicture","handleClose","Main","maxSnack","ReactDOM","CssBaseline","getElementById"],"mappings":"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","file":"static/js/main.f5e0095f.chunk.js","sourcesContent":["import { createMuiTheme, responsiveFontSizes } from '@material-ui/core/styles';\n\n/**\n <color name=\"primaryColor\">#eae1da</color>\n <color name=\"primaryLightColor\">#ffffff</color>\n <color name=\"primaryDarkColor\">#b8afa8</color>\n <color name=\"secondaryColor\">#ffd54f</color>\n <color name=\"secondaryLightColor\">#ffff81</color>\n <color name=\"secondaryDarkColor\">#c8a415</color>\n <color name=\"primaryTextColor\">#000000</color>\n <color name=\"secondaryTextColor\">#000000</color>\n */\n\n/**\n * More info: [https://material-ui.com/customization/default-theme/]\n */\n\nexport const themedBorderRadius = 20;\n\nexport default responsiveFontSizes(\n  createMuiTheme({\n    breakpoints: {\n      values: {\n        xs: 0,\n        sm: 600,\n        smmd: 800,\n        md: 960,\n        lg: 1280,\n        xl: 1920,\n      },\n    },\n    palette: {\n      primary: {\n        main: '#eae1da',\n      },\n      secondary: {\n        main: '#ac9486',\n        light: '#b8afa8',\n      },\n      custom: {\n        black: '#000000',\n        shadowGray: '#dadada',\n        linkBlue: '#2858f4',\n        lightGrey: '#989898',\n        facebook: '#1778F2',\n        telegram: '#1778F2',\n      },\n    },\n    typography: {\n      h1: {\n        fontFamily: 'Libre Baskerville',\n      },\n      h2: {\n        fontFamily: 'Libre Baskerville',\n      },\n      h3: {\n        fontFamily: 'Libre Baskerville',\n      },\n      h4: {\n        fontFamily: 'Libre Baskerville',\n      },\n      h5: {\n        fontFamily: 'Libre Baskerville',\n      },\n      h6: {\n        fontFamily: 'Roboto',\n      },\n      body1: {\n        fontFamily: 'Roboto',\n      },\n      body2: {\n        fontFamily: 'Roboto',\n      },\n      subtitle1: {\n        fontFamily: 'Roboto',\n      },\n      subtitle2: {\n        fontFamily: 'Roboto',\n      },\n    },\n    overrides: {\n      MuiButton: {\n        root: {\n          borderRadius: themedBorderRadius,\n        },\n      },\n      MuiFilledInput: {\n        root: {\n          borderRadius: themedBorderRadius,\n        },\n      },\n      MuiOutlinedInput: {\n        root: {\n          borderRadius: themedBorderRadius,\n        },\n      },\n    },\n    mixins: {\n      toolbarDrawer: {\n        minHeight: '56px',\n        maxHeight: '56px',\n        '@media (min-width: 0px) and (orientation: landscape)': {\n          minHeight: '48px',\n          maxHeight: '48px',\n        },\n        '@media (min-width: 600px)': {\n          minHeight: '64px',\n          maxHeight: '64px',\n        },\n      },\n      // Like the mixins.toolbar of the default material UI theme\n      navigator: {\n        minHeight: '56px',\n        '@media (min-width: 0px) and (orientation: landscape)': {\n          minHeight: '48px',\n        },\n        '@media (min-width: 600px)': {\n          minHeight: '64px',\n        },\n      },\n    },\n  })\n);\n\nexport const pageFrame = (theme) => ({\n  pageFrame: {\n    [theme.breakpoints.up('xs')]: {\n      padding: '20px 6%',\n    },\n    [theme.breakpoints.up('sm')]: {\n      padding: '20px 10%',\n    },\n    [theme.breakpoints.up('md')]: {\n      padding: '20px 10%',\n    },\n  },\n});\n","export const DEBUG = false;\n\nexport const BASE_URL_DEV = 'http://localhost:7000';\n\nexport const BASE_URL_PROD = 'https://books-platform-backend.herokuapp.com';\n\nexport const API_VERSION = 'v1';\n\nexport const LOCAL_STORAGE_TOKEN_KEY = 'token';\n","import { createContext, useContext, useState } from 'react';\nimport { LOCAL_STORAGE_TOKEN_KEY } from 'utils/environment';\n\nconst localStorageAuth = {\n  login(onSuccess, token) {\n    localStorage.setItem(LOCAL_STORAGE_TOKEN_KEY, token);\n    onSuccess(token);\n  },\n  logout(onSuccess) {\n    localStorage.removeItem(LOCAL_STORAGE_TOKEN_KEY);\n    onSuccess();\n  },\n  getToken() {\n    return localStorage.getItem(LOCAL_STORAGE_TOKEN_KEY);\n  },\n};\n\nexport const authContext = createContext({});\n\nexport function useAuth() {\n  return useContext(authContext);\n}\n\nexport function useProvideAuth() {\n  const [token, setToken] = useState(localStorageAuth.getToken());\n\n  const login = (serverToken) =>\n    localStorageAuth.login((savedToken) => {\n      setToken(savedToken);\n    }, serverToken);\n\n  const logout = () =>\n    localStorageAuth.logout(() => {\n      setToken(null);\n    });\n\n  const isLoggedIn = () => !!token;\n\n  return {\n    token,\n    isLoggedIn,\n    login,\n    logout,\n  };\n}\n","import React from 'react';\nimport { authContext, useProvideAuth } from 'hooks/auth';\n\nexport default function ProvideAuth({ children }) {\n  const auth = useProvideAuth();\n\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n}\n","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { useAuth } from 'hooks/auth';\nimport { AUTH_ROUTE } from 'routing/helpers';\n\nexport default function ProtectedRoute({ render, ...rest }) {\n  const auth = useAuth();\n\n  return (\n    <Route\n      {...rest}\n      render={(props) =>\n        auth.isLoggedIn() ? (\n          render(props)\n        ) : (\n          <Redirect\n            to={{\n              pathname: AUTH_ROUTE,\n              state: { from: props.location },\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { useAuth } from 'hooks/auth';\nimport { EXPLORE_ROUTE } from 'routing/helpers';\n\nexport default function GuestRoute({ render, ...rest }) {\n  const auth = useAuth();\n\n  return (\n    <Route\n      {...rest}\n      render={(props) =>\n        auth.isLoggedIn() ? (\n          <Redirect\n            to={{\n              pathname: EXPLORE_ROUTE,\n              state: { from: props.location },\n            }}\n          />\n        ) : (\n          render(props)\n        )\n      }\n    />\n  );\n}\n","const RoutePrivileges = {\n  ANYONE: 0,\n  GUEST: 1,\n  AUTHENTICATED: 2,\n};\n\nexport default RoutePrivileges;\n","import { Route } from 'react-router-dom';\nimport React from 'react';\nimport ProtectedRoute from 'components/routing/ProtectedRoute';\nimport GuestRoute from 'components/routing/GuestRoute';\nimport RoutePrivileges from './privileges';\n\nexport const LANDING_ROUTE = '/';\nexport const CONFIRM_ROUTE = '/confirm/:transactionId';\nexport const AUTH_ROUTE = '/login';\nexport const APP_ROUTE = '/app';\nexport const BOOK_ROUTE = `${APP_ROUTE}/book/:id`;\nexport const DASHBOARD_ROUTE = `${APP_ROUTE}/dashboard`;\nexport const EXPLORE_ROUTE = `${DASHBOARD_ROUTE}/explore`;\nexport const SELL_ROUTE = `${DASHBOARD_ROUTE}/sell`;\nexport const NEW_SELL_ROUTE = `${SELL_ROUTE}/new`;\nexport const EDIT_SELL_ROUTE = `${SELL_ROUTE}/edit`;\nexport const REMOVE_SELL_ROUTE = `${SELL_ROUTE}/remove`;\nexport const LINK_SELL_ROUTE = `${SELL_ROUTE}/link`;\nexport const PROFILE_ROUTE = `${DASHBOARD_ROUTE}/profile`;\nexport const EDIT_PROFILE_ROUTE = `${PROFILE_ROUTE}/edit`;\nexport const EDIT_PROFILE_PICTURE_ROUTE = `${PROFILE_ROUTE}/picture`;\nexport const NO_MATCH_ROUTE = '*';\n\nexport const toRoute = (routeName, ...params) => {\n  switch (routeName) {\n    case BOOK_ROUTE:\n      return `${APP_ROUTE}/book/${params[0]}`;\n    default:\n      return routeName;\n  }\n};\n\nexport const renderRoute = (route, extraProps = {}) => {\n  switch (route.privilege) {\n    case RoutePrivileges.AUTHENTICATED:\n      return (\n        <ProtectedRoute\n          key={route.path}\n          exact={route.isExact}\n          path={route.path}\n          render={(props) => (\n            <route.component\n              {...{ ...props, ...extraProps }}\n              routes={route.routes}\n            />\n          )}\n        />\n      );\n    case RoutePrivileges.GUEST:\n      return (\n        <GuestRoute\n          key={route.path}\n          exact={route.isExact}\n          path={route.path}\n          render={(props) => (\n            <route.component\n              {...{ ...props, ...extraProps }}\n              routes={route.routes}\n            />\n          )}\n        />\n      );\n    default:\n      return (\n        <Route\n          key={route.path}\n          exact={route.isExact}\n          path={route.path}\n          render={(props) => (\n            <route.component\n              {...{ ...props, ...extraProps }}\n              routes={route.routes}\n            />\n          )}\n        />\n      );\n  }\n};\n","import React from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { EXPLORE_ROUTE, NO_MATCH_ROUTE, renderRoute } from 'routing/helpers';\n\nexport default function Routes({ routes }) {\n  return (\n    <Switch>\n      {routes.map((route) => renderRoute(route))}\n      <Route path={NO_MATCH_ROUTE}>\n        <Redirect to={{ pathname: EXPLORE_ROUTE }} />\n      </Route>\n    </Switch>\n  );\n}\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport { Avatar } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    position: 'static',\n    color: theme.palette.primary.dark,\n    backgroundColor: theme.palette.primary.main,\n  },\n}));\n\nexport default function FeatureCard({ icon, title, description }) {\n  const classes = useStyles();\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"center\"\n      alignItems=\"center\"\n      spacing={1}\n    >\n      <Grid item>\n        <Avatar className={classes.avatar}>{icon}</Avatar>\n      </Grid>\n      <Grid item>\n        <Typography variant=\"h5\" align=\"center\">\n          <b>{title}</b>\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Typography variant=\"body1\" align=\"center\">\n          {description}\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme) => ({\n  child: {\n    objectFit: 'cover',\n    backgroundColor: theme.palette.primary.main,\n  },\n}));\n\nexport default function VerticalRectangular({ children, className }) {\n  const classes = useStyles();\n\n  return (\n    <Grid container justify=\"center\" alignItems=\"center\">\n      <Grid item>\n        {/* Inject props */}\n        {React.Children.map(children, (child) =>\n          React.cloneElement(child, {\n            className: clsx(classes.child, className),\n            style: { borderRadius: 5 },\n          })\n        )}\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { Grid, Link, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport VerticalRectangular from '../VerticalRectangular';\n\nconst useStyles = makeStyles((theme) => ({\n  bookCover: {\n    [theme.breakpoints.up('xs')]: {\n      width: '53px',\n      height: '80px',\n    },\n    [theme.breakpoints.up('md')]: {\n      width: '66px',\n      height: '100px',\n    },\n    boxShadow: `1px 1px 5px 1px ${theme.palette.custom.shadowGray}`,\n    '&:hover': {\n      // Old style -> outline: `3px solid ${theme.palette.primary.dark}`,\n      boxShadow: `2px 2px 5px 2px ${theme.palette.custom.shadowGray}`,\n    },\n  },\n}));\n\nexport default function BookCard(props) {\n  const classes = useStyles();\n  const { book } = props;\n\n  return (\n    <Grid\n      container\n      direction=\"row\"\n      justify=\"space-between\"\n      alignItems=\"center\"\n      spacing={2}\n    >\n      <Grid item>\n        <Grid container justify=\"flex-start\" alignItems=\"center\" spacing={2}>\n          <Grid item>\n            <VerticalRectangular className={classes.bookCover}>\n              <img src={book.pictures[0]} alt={`book cover of ${book.title}`} />\n            </VerticalRectangular>\n          </Grid>\n          <Grid item>\n            <Grid\n              container\n              direction=\"column\"\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              spacing={1}\n            >\n              <Grid item>\n                <Link\n                  variant=\"body1\"\n                  color=\"inherit\"\n                  // Link disabled\n                  onClick={(event) => event.preventDefault()}\n                  href=\"\"\n                >\n                  <b>{book.title}</b>\n                </Link>\n              </Grid>\n              <Grid item>\n                <Typography variant=\"body1\">{book.isbn}</Typography>\n              </Grid>\n              <Grid item>\n                <Typography variant=\"subtitle2\">\n                  The book is in <b>{book.condition}</b> conditions\n                </Typography>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item>\n        <Typography variant=\"body1\">\n          <b>{`${book.currency} ${book.amount}`}</b>\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { Button, Divider, Paper } from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { useHistory } from 'react-router-dom';\nimport { BOOK_ROUTE, EXPLORE_ROUTE, toRoute } from 'routing/helpers';\nimport BookCard from 'components/BookCard';\n\nconst useStyles = makeStyles((theme) => ({\n  searchResults: {\n    position: 'absolute',\n    borderRadius: 20,\n    width: '100%',\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(3),\n    // offset-x | offset-y | blur-radius | spread-radius\n    '&:hover': {\n      boxShadow: `0px 20px 25px -5px ${theme.palette.custom.shadowGray}`,\n    },\n  },\n}));\n\nexport default function SearchResults({ books, showSignup }) {\n  const classes = useStyles();\n  const history = useHistory();\n\n  return (\n    <Paper className={classes.searchResults} variant=\"outlined\">\n      <Grid\n        container\n        spacing={3}\n        direction=\"column\"\n        justify=\"flex-start\"\n        alignItems=\"stretch\"\n      >\n        {books.map((book, index) => (\n          <Grid\n            item\n            key={index}\n            onClick={() => history.push(toRoute(BOOK_ROUTE, book.bookId))}\n          >\n            <BookCard book={book} />\n          </Grid>\n        ))}\n        {showSignup && (\n          <>\n            <Divider light />\n            <Grid item>\n              <SeeMore />\n            </Grid>\n          </>\n        )}\n      </Grid>\n    </Paper>\n  );\n}\n\nfunction SeeMore() {\n  const history = useHistory();\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"center\"\n      alignItems=\"center\"\n      spacing={1}\n    >\n      <Grid item>\n        <Typography variant=\"body1\">Interested in these books?</Typography>\n      </Grid>\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          disableElevation={true}\n          onClick={() => history.push(toRoute(EXPLORE_ROUTE))}\n        >\n          Sign up for free\n        </Button>\n      </Grid>\n    </Grid>\n  );\n}\n","import { CircularProgress, InputBase } from '@material-ui/core';\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport { SearchRounded } from '@material-ui/icons';\n\nconst useStyles = makeStyles((theme) => ({\n  inputRoot: {\n    color: 'inherit',\n    fontSize: 19,\n    width: '100%',\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(1.5)}px)`,\n    width: '100%',\n    fontFamily: theme.typography.fontFamily,\n  },\n  search: {\n    position: 'relative',\n    marginRight: theme.spacing(1),\n    marginLeft: theme.spacing(1),\n  },\n  searchIconContainer: {\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  loadingIndicatorContainer: {\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  searchIcon: {\n    color: fade(theme.palette.custom.black, 0.4),\n  },\n}));\n\nexport default function SearchBar({ onSearching, isLoading }) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.search}>\n      <div className={classes.searchIconContainer}>\n        {isLoading ? (\n          <CircularProgress\n            variant=\"indeterminate\"\n            disableShrink\n            color=\"secondary\"\n            size={20}\n            thickness={4}\n          />\n        ) : (\n          <SearchRounded className={classes.searchIcon} />\n        )}\n      </div>\n      <InputBase\n        placeholder=\"Search by isbn, title, description\"\n        classes={{\n          root: classes.inputRoot,\n          input: classes.inputInput,\n        }}\n        inputProps={{ 'aria-label': 'search' }}\n        onChange={(event) => onSearching(event.target.value)}\n      />\n    </div>\n  );\n}\n","import axios from 'axios';\nimport {\n  API_VERSION,\n  BASE_URL_DEV,\n  BASE_URL_PROD,\n  DEBUG,\n  LOCAL_STORAGE_TOKEN_KEY,\n} from 'utils/environment';\n\nconst HOST = DEBUG ? BASE_URL_DEV : BASE_URL_PROD;\nexport const BASE_URL = `${HOST}/${API_VERSION}`;\n\nexport const successWith = (onSuccess, onFailure, ...successStatusCodes) => (\n  response\n) => {\n  if (successStatusCodes.includes(response.status)) {\n    onSuccess(response.data.body);\n  } else {\n    onFailure(response, false);\n  }\n};\n\nexport const failureWith = (onFailure, ...expectedStatusCodes) => (error) => {\n  if (!axios.isCancel(error)) {\n    const expected =\n      error.response && expectedStatusCodes.includes(error.response.status);\n    onFailure(error, expected);\n  }\n};\n\nexport const withAuth = (config) => {\n  const token = localStorage.getItem(LOCAL_STORAGE_TOKEN_KEY);\n  return {\n    ...config,\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  };\n};\n","import axios from 'axios';\nimport { BASE_URL, failureWith, successWith } from './base';\n\nconst landingSearchBy = (onSuccess, onFailure, cancelToken, searchQuery) => {\n  axios\n    .get(`${BASE_URL}/landing/search`, {\n      params: { searchQuery },\n      cancelToken,\n    })\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 500, 422));\n};\n\nexport default landingSearchBy;\n","const StdMessages = {\n  CONTACT_SUPPORT: () =>\n    'Please contact the support for help if the problem persists.',\n  UNEXPECTED: (operation = '') =>\n    `Something went wrong${\n      operation === '' ? '' : ` while ${operation}`\n    }. ${StdMessages.CONTACT_SUPPORT()}`,\n  NETWORK_ERROR: (operation = '') =>\n    `The communication with the server failed${\n      operation === '' ? '' : ` while ${operation}`\n    }. Check your internet connection.`,\n  MAX_NUMBER_IMAGES: () => 'Maximum number of images reached.',\n  INVALID_FORMAT: () => 'Invalid file format.',\n  UNSUPPORTED_FORMAT: () => 'Unsupported file format.',\n  SIGNUP_DONE: () => 'Signed up! You are ready to go!',\n  CURRENCIES_ERROR: () => `The list of supported currencies could not be loaded. \n  ${StdMessages.CONTACT_SUPPORT()}`,\n};\nexport default StdMessages;\n","function createEnum(values) {\n  const enumObject = {};\n  for (const val of values) {\n    enumObject[val] = val;\n  }\n  return Object.freeze(enumObject);\n}\n\nexport const bookConditions = createEnum(['great', 'good', 'ok', 'bad', 'na']);\nexport const uploadProgress = createEnum(['waiting', 'uploading', 'uploaded']);\nexport const axiosState = createEnum(['progress', 'success', 'error', 'abort']);\n/*\nfull = no free space\nnotEnough = not enough items\nenough = enough items and there is still free space\n */\nexport const fillingState = createEnum(['full', 'notEnough', 'enough']);\nexport const computeFillingState = (min, max, value) => {\n  if (value === max) {\n    return fillingState.full;\n  }\n  if (value < min) {\n    return fillingState.notEnough;\n  }\n  return fillingState.enough;\n};\n","import { useRef, useState } from 'react';\nimport axios from 'axios';\nimport StdMessages from 'messages/standard';\nimport { useSnackbar } from 'notistack';\nimport { axiosState } from 'utils/constants';\nimport { useAuth } from './auth';\n\nfunction isNetworkError(error) {\n  return !!error.isAxiosError && !error.response;\n}\n\nexport const useAxios = (\n  axiosBlock,\n  operationName = '',\n  onSuccess = () => {},\n  onExpectedError = () => {}\n) => {\n  const [data, setData] = useState(undefined);\n  const [error, setError] = useState(undefined);\n  const [isLoading, setIsLoading] = useState(false);\n  const [source, setSource] = useState(null);\n\n  const { enqueueSnackbar } = useSnackbar();\n  const auth = useAuth();\n\n  const fetch = (...args) => {\n    // We use this variable in order to pass the value to the axiosBlock and\n    // also to the state as the state propagation is asynchronous.\n    const localSource = axios.CancelToken.source();\n    setSource(localSource);\n    setIsLoading(true);\n    axiosBlock(\n      (body) => {\n        setIsLoading(false);\n        setData(body);\n        setError(null);\n\n        onSuccess(body);\n      },\n      (err, expected) => {\n        setIsLoading(false);\n        setData(null);\n        setError(err);\n\n        if (expected) {\n          onExpectedError(err);\n        } else if (err?.response?.status === 401) {\n          auth.logout();\n        } else if (isNetworkError(err)) {\n          enqueueSnackbar(`${StdMessages.NETWORK_ERROR(operationName)}`, {\n            variant: 'error',\n          });\n        } else {\n          const errorDetail = err?.response?.data?.detail ?? err;\n          enqueueSnackbar(\n            `${StdMessages.UNEXPECTED(operationName)}\\nCause: ${errorDetail}`,\n            {\n              variant: 'error',\n            }\n          );\n        }\n      },\n      localSource.token,\n      ...args\n    );\n  };\n\n  const cancelPrevious = () => {\n    if (source != null) source.cancel();\n    setIsLoading(false);\n  };\n\n  return [fetch, cancelPrevious, data, error, isLoading];\n};\n\nexport const useStatelessAxios = (axiosBlock, operationName = '') => {\n  const { enqueueSnackbar } = useSnackbar();\n  const auth = useAuth();\n\n  const sources = useRef([]);\n  const removeSource = (sourceToRemove) => {\n    sources.current = sources.current.filter(\n      (source) => source !== sourceToRemove\n    );\n  };\n  const addSource = (sourceToAdd) => {\n    sources.current = [...sources.current, sourceToAdd];\n  };\n\n  const fetch = (onStateChange = (state, data) => {}, ...args) => {\n    // We use this variable in order to pass the value to the axiosBlock and\n    // also to the state as the state propagation is asynchronous.\n    const localSource = axios.CancelToken.source();\n    addSource(localSource);\n\n    onStateChange(axiosState.progress, null);\n    axiosBlock(\n      (body) => {\n        removeSource(localSource);\n        onStateChange(axiosState.success, body);\n      },\n      (err, expected) => {\n        removeSource(localSource);\n\n        if (err?.response?.status === 401) {\n          auth.logout();\n        } else if (expected) {\n          onStateChange(axiosState.error, err);\n        } else if (isNetworkError(err)) {\n          enqueueSnackbar(`${StdMessages.NETWORK_ERROR(operationName)}`, {\n            variant: 'error',\n          });\n        } else {\n          enqueueSnackbar(\n            `${StdMessages.UNEXPECTED(operationName)}\\nCause: ${err}`,\n            {\n              variant: 'error',\n            }\n          );\n        }\n      },\n      localSource.token,\n      ...args\n    );\n  };\n\n  const cancelAll = () => {\n    const sourcesCopy = [...sources.current];\n    // Remove all\n    sources.current = [];\n    // Cancel each\n    sourcesCopy.forEach((source) => source.cancel());\n  };\n\n  return [fetch, cancelAll];\n};\n","// noinspection JSUnfilteredForInLoop\n\nexport const debounce = (func, timeout) => {\n  let timer;\n  return (...args) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => func.apply(this, args), timeout);\n  };\n};\n\nexport function getFromObject(object, key) {\n  const keys = key.split('.');\n  return keys.reduce(\n    (prevObject, currentKey) =>\n      prevObject ? prevObject[currentKey] : undefined,\n    object\n  );\n}\n\nexport function buildObjectFromFields(fields) {\n  return fields.reduce(\n    (object, field) => ({\n      ...object,\n      [field.name]: field.data,\n    }),\n    {}\n  );\n}\n\nfunction isObject(item) {\n  return item && typeof item === 'object' && !Array.isArray(item);\n}\n\nfunction mergeDeep(target, ...sources) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        mergeDeep(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return mergeDeep(target, ...sources);\n}\n\nfunction deriveObject(key, value) {\n  const keys = key.split('.');\n  const singleKey = keys.pop();\n\n  const object = {};\n  let currentObject = object;\n\n  keys.forEach((currentKey) => {\n    currentObject[currentKey] = {};\n    currentObject = currentObject[currentKey];\n  });\n\n  currentObject[singleKey] = value;\n\n  return object;\n}\n\nexport function imprintObject(object) {\n  const keys = Object.keys(object);\n  return keys.reduce(\n    (imprintedObj, key) =>\n      mergeDeep(imprintedObj, deriveObject(key, object[key])),\n    {}\n  );\n}\n","import React, { useState } from 'react';\nimport { ClickAwayListener, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchResults from 'components/landing/SearchResults';\nimport SearchBar from 'components/landing/SearchBar';\nimport landingSearchBy from 'api/landing';\nimport { useAxios } from 'hooks/axios';\nimport { debounce } from 'utils/functions';\n\nconst useStyles = makeStyles((theme) => ({\n  searchCard: {\n    position: 'relative',\n    borderRadius: 20,\n    height: 'auto',\n    // offset-x | offset-y | blur-radius | spread-radius\n    '&:hover': {\n      boxShadow: `0px 10px 25px -5px ${theme.palette.custom.shadowGray}`,\n    },\n  },\n}));\n\nexport default function LandingSearch() {\n  const classes = useStyles();\n  const [hideSearch, setHideSearch] = useState(true);\n  const [fetch, cancelPrevious, data, , isLoading] = useAxios(\n    landingSearchBy,\n    'searching'\n  );\n\n  const handleSearch = debounce((query) => {\n    fetch(query);\n    return () => cancelPrevious();\n  }, 250);\n\n  const showSearchResults = !hideSearch && data && data.length > 0;\n\n  return (\n    <ClickAwayListener onClickAway={() => setHideSearch(true)}>\n      <Paper\n        className={classes.searchCard}\n        variant=\"outlined\"\n        onClick={() => setHideSearch(false)}\n      >\n        <SearchBar onSearching={handleSearch} isLoading={isLoading} />\n        {showSearchResults && <SearchResults books={data} showSignup={true} />}\n      </Paper>\n    </ClickAwayListener>\n  );\n}\n","import React, { useState } from 'react';\n\nexport default function CloudImage({\n  url,\n  cutExtension,\n  style = undefined,\n  onLoad = () => {},\n  ...remProps\n}) {\n  const [imgProps, setImgProps] = useState({});\n  let validUrl = url;\n  /*\n  If the given url ends with an extension, like .jpg,\n  we cut it such that only the dot remains\n   */\n  if (cutExtension) validUrl = url.slice(0, url.lastIndexOf('.') + 1);\n\n  // noinspection HtmlRequiredAltAttribute\n  return (\n    /*\n    Insert sources in all formats supported by our app.\n    Browsers start with the first one and try the next one\n    if it wasn't compatible. Once they find a suitable source,\n    they use it to set the src of the img.\n     */\n    <picture style={style}>\n      {/*\n      avif disabled, because due to avif's long encoding times,\n      cloudinary's support is currently limited\n      <source srcSet={`${url}avif`} type=\"image/avif\" />\n       */}\n      <source srcSet={`${validUrl}webp`} type=\"image/webp\" />\n      <source srcSet={`${validUrl}jp2`} type=\"image/jp2\" />\n      <source srcSet={`${validUrl}jxr`} type=\"image/vnd.ms-photo\" />\n      <img\n        onError={() => {\n          setImgProps({ src: url, alt: 'missing cloud-image' });\n          onLoad();\n        }}\n        src={imgProps.src}\n        style={{ margin: 'auto' }}\n        alt={imgProps.alt || `cloud-image-${url}`}\n        onLoad={onLoad}\n        {...remProps}\n      />\n    </picture>\n  );\n}\n","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography, useMediaQuery } from '@material-ui/core';\nimport CloudImage from 'components/CloudImage';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    flexWrap: 'wrap',\n    [theme.breakpoints.up('smmd')]: {\n      flexWrap: 'nowrap',\n    },\n  },\n  illustrationContainer: {\n    textAlign: 'right',\n  },\n  illustration: {\n    minWidth: '200px',\n    maxWidth: '430px',\n    width: '100%',\n    height: 'auto',\n  },\n  welcomeMsg: {\n    minWidth: '100px',\n    width: '100%',\n  },\n}));\n\nexport default function LandingWelcome() {\n  const classes = useStyles();\n  const upSmallMedium = useMediaQuery((theme) => theme.breakpoints.up('smmd'));\n\n  return (\n    <Grid\n      className={classes.root}\n      container\n      spacing={2}\n      direction={upSmallMedium ? 'row' : 'column'}\n      justify={upSmallMedium ? 'space-between' : 'center'}\n      alignItems={upSmallMedium ? 'center' : 'stretch'}\n    >\n      <Grid item>\n        <Grid\n          className={classes.welcomeMsg}\n          container\n          spacing={2}\n          direction=\"column\"\n          justify=\"center\"\n          alignItems=\"flex-start\"\n        >\n          <Grid item>\n            <Typography variant=\"h3\">\n              Welcome to <b>Books</b>\n            </Typography>\n          </Grid>\n          <Grid item>\n            <Typography variant=\"h4\">\n              Discover and sell amazing books with ease\n            </Typography>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item className={classes.illustrationContainer}>\n        <CloudImage\n          className={classes.illustration}\n          alt=\"student library\"\n          url=\"https://res.cloudinary.com/dlfbz4vzv/image/upload/v1618163769/Books/student_library_rymenl.\"\n        />\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport { Button } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudImage from 'components/CloudImage';\nimport { useHistory } from 'react-router-dom';\nimport { EXPLORE_ROUTE } from 'routing/helpers';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    flexWrap: 'wrap',\n  },\n  logo: {\n    height: '60px',\n  },\n  button: {\n    fontFamily: theme.typography.body1.fontFamily,\n  },\n}));\n\nexport default function LandingHeader() {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const changePage = (route) => {\n    history.push(route);\n  };\n\n  return (\n    <Grid\n      className={classes.root}\n      container\n      direction=\"row\"\n      justify=\"space-between\"\n      alignItems=\"center\"\n      spacing={2}\n    >\n      <Grid item>\n        <CloudImage\n          className={classes.logo}\n          alt=\"logo extended\"\n          url=\"https://res.cloudinary.com/dlfbz4vzv/image/upload/v1618163769/Books/logo_extended_tzumtl.\"\n        />\n      </Grid>\n      <Grid item>\n        <Grid container spacing={2}>\n          <Grid item>\n            <Button\n              className={classes.button}\n              variant=\"outlined\"\n              color=\"default\"\n              onClick={() => changePage(EXPLORE_ROUTE)}\n            >\n              Log in\n            </Button>\n          </Grid>\n          <Grid item>\n            <Button\n              className={classes.button}\n              variant=\"contained\"\n              color=\"primary\"\n              disableElevation={true}\n              onClick={() => changePage(EXPLORE_ROUTE)}\n            >\n              Sign up for free\n            </Button>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useMediaQuery } from '@material-ui/core';\nimport CloudImage from 'components/CloudImage';\n\n// TODO: migrate texts to markdown.\n\nconst useStyles = makeStyles((theme) => ({\n  image: {\n    width: '150px',\n    height: '150px',\n    borderRadius: 10,\n    boxShadow: `0px 1px 3px 0px ${theme.palette.custom.shadowGray}`,\n    objectFit: 'cover',\n  },\n}));\n\nconst people = [\n  {\n    name: 'Gioele De Vitti',\n    img:\n      'https://res.cloudinary.com/dlfbz4vzv/image/upload/v1622561372/Books/gioele_de_vitti.',\n    role: 'Frontend Developer',\n    description:\n      'Coming from an electronic engineering background, I enjoy developing' +\n      ' embedded applications and designing printed circuit boards. ' +\n      'I love gaming and networking. My proverb of choice is \"sapere aude\".',\n  },\n  {\n    name: 'Riccardo Busetti',\n    img:\n      'https://res.cloudinary.com/dlfbz4vzv/image/upload/v1618163769/Books/riccardo_busetti.',\n    role: 'Backend Developer',\n    description:\n      'I come from an IT background, working mainly on mobile and ' +\n      'backend development. I have been interning in different companies ' +\n      'in the past years, working on products used by hundreds and millions ' +\n      'of people worldwide. I am currently interested in distributed systems, ' +\n      'software architecture, and the scalability of infrastructures.',\n  },\n];\n\nexport default function LandingAbout() {\n  const downXSmall = useMediaQuery((theme) => theme.breakpoints.down('xs'));\n\n  return (\n    <Grid\n      container\n      spacing={downXSmall ? 4 : 8}\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"stretch\"\n    >\n      {people.map((person, key) => (\n        <Grid item key={key}>\n          <Person person={person} />\n        </Grid>\n      ))}\n    </Grid>\n  );\n}\n\nfunction Person({ person }) {\n  const classes = useStyles();\n\n  return (\n    <Grid container justify=\"flex-start\" alignItems=\"center\" spacing={2}>\n      <Grid item>\n        <CloudImage className={classes.image} alt=\"person\" url={person.img} />\n      </Grid>\n      <Grid item>\n        <Grid\n          container\n          direction=\"column\"\n          justify=\"center\"\n          alignItems=\"flex-start\"\n          spacing={1}\n        >\n          <Grid item>\n            <Typography variant=\"h4\">{person.name}</Typography>\n          </Grid>\n          <Grid item>\n            <Typography variant=\"subtitle1\" color=\"textSecondary\">\n              {person.role}\n            </Typography>\n          </Grid>\n          <Grid item>\n            <Typography variant=\"body1\">{person.description}</Typography>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n","import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport CopyrightIcon from '@material-ui/icons/Copyright';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  Link,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core';\n\nconst creditsCollection = [\n  {\n    type: 'Libraries',\n    list: [\n      {\n        name: 'React',\n        refLabel: 'React website',\n        ref: 'https://reactjs.org',\n      },\n      {\n        name: 'Material-UI',\n        refLabel: 'Material-UI website',\n        ref: 'https://material-ui.com',\n      },\n      {\n        name: 'React Router',\n        refLabel: 'React Router website',\n        ref: 'https://reactrouter.com',\n      },\n      {\n        name: 'Axios',\n        refLabel: 'Axios website',\n        ref: 'https://axios-http.com/docs/intro',\n      },\n    ],\n  },\n  {\n    type: 'Images',\n    list: [\n      {\n        name: 'Library illustration',\n        refLabel: 'Simon from dribbble.com',\n        ref: 'https://dribbble.com/shots/11280628-Library-illustration',\n      },\n      {\n        name: 'All icons',\n        refLabel: 'Material UI icons',\n        ref: 'https://www.npmjs.com/package/@material-ui/icons',\n      },\n    ],\n  },\n  {\n    type: 'Animations',\n    list: [\n      {\n        name: 'Girl tapping phone',\n        refLabel: 'duxtree from lottiefiles.com',\n        ref: 'https://lottiefiles.com/55461-girl-tapping-phone',\n      },\n      {\n        name: 'Book bounce open',\n        refLabel: 'Charlene Hew from lottiefiles.com',\n        ref: 'https://lottiefiles.com/57288-book-bounce-open',\n      },\n      {\n        name: 'Profile password unlock',\n        refLabel: 'PassionHacks from lottiefiles.com',\n        ref: 'https://lottiefiles.com/63004-profile-password-unlock',\n      },\n    ],\n  },\n];\n\nexport default function LandingCredits() {\n  const [showDialog, setShowDialog] = useState(false);\n\n  return (\n    <>\n      <CreditsDialog open={showDialog} onClose={() => setShowDialog(false)} />\n      <Button\n        fullWidth\n        color=\"primary\"\n        variant=\"contained\"\n        disableElevation={true}\n        startIcon={<CopyrightIcon />}\n        onClick={() => setShowDialog(true)}\n      >\n        Credits\n      </Button>\n    </>\n  );\n}\n\nfunction CreditsDialog({ open, onClose }) {\n  const theme = useTheme();\n  const downSmall = useMediaQuery((innerTheme) =>\n    innerTheme.breakpoints.down(innerTheme.breakpoints.values.sm)\n  );\n\n  return (\n    <Dialog\n      fullScreen={downSmall}\n      fullWidth={false}\n      open={open}\n      onClose={onClose}\n    >\n      <DialogContent>\n        <Grid container direction=\"column\" spacing={2}>\n          {creditsCollection.map((credits, index) => (\n            <Grid item xs={12} key={index}>\n              <Typography variant=\"h6\">{credits.type}</Typography>\n              <Grid\n                container\n                direction=\"column\"\n                spacing={1}\n                style={{ marginTop: theme.spacing(1) }}\n              >\n                {credits.list.map((credit, creditIndex) => (\n                  <Grid item key={creditIndex}>\n                    <Typography variant=\"body1\">\n                      {`${credit.name} - `}\n                      <Link\n                        color=\"textSecondary\"\n                        href={credit.ref}\n                        target=\"_blank\"\n                        rel=\"noopener\"\n                      >\n                        {credit.refLabel}\n                      </Link>\n                    </Typography>\n                  </Grid>\n                ))}\n              </Grid>\n            </Grid>\n          ))}\n        </Grid>\n      </DialogContent>\n      <DialogActions>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n          spacing={2}\n        >\n          <Grid item>\n            <Button onClick={onClose}>Close</Button>\n          </Grid>\n        </Grid>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport { Typography, useMediaQuery } from '@material-ui/core';\nimport FeatureCard from 'components/landing/FeatureCard';\nimport LandingSearch from 'components/landing/LandingSearch';\nimport MoneyOffIcon from '@material-ui/icons/MoneyOff';\nimport EmojiEmotionsIcon from '@material-ui/icons/EmojiEmotions';\nimport LockIcon from '@material-ui/icons/Lock';\nimport HeartIcon from '@material-ui/icons/Favorite';\nimport LandingWelcome from 'components/landing/LandingWelcome';\nimport LandingHeader from 'components/landing/LandingHeader';\nimport LandingAbout from 'components/landing/LandingAbout';\nimport { pageFrame } from 'theming';\nimport LandingCredits from 'components/landing/LandingCredits';\n\nconst features = [\n  {\n    icon: <EmojiEmotionsIcon />,\n    title: 'Simple',\n    description:\n      'Books has been designed to be simple and hassle-free. ' +\n      'Smart sections such as Explore give you the ability to easily ' +\n      'discover new books that may interest you.',\n  },\n  {\n    icon: <MoneyOffIcon />,\n    title: 'Free',\n    description:\n      \"No ads and no fees. Books doesn't force you into a specific payment \" +\n      'or shipping method. Users have complete freedom of choice.',\n  },\n  {\n    icon: <LockIcon />,\n    title: 'Secure',\n    description:\n      'Privacy and security are our priorities. We do not store critical user' +\n      ' information on our servers. Data collection is kept to the bare' +\n      ' essentials and is not shared with third parties.',\n  },\n  {\n    icon: <HeartIcon />,\n    title: 'Passion Driven',\n    description:\n      'Books has been developed by book lovers that were frustrated by ' +\n      'current solutions on the market. We decided to jump ' +\n      'on this challenge and to create the platform of our dreams.',\n  },\n];\n\nconst useStyles = makeStyles((theme) => ({\n  ...pageFrame(theme),\n  page: {\n    [theme.breakpoints.up('xs')]: {\n      marginTop: '25px',\n    },\n    [theme.breakpoints.up('sm')]: {\n      marginTop: '50px',\n    },\n  },\n  sectionTitle: {\n    fontWeight: 'bold',\n  },\n  searchBar: {\n    [theme.breakpoints.up('sm')]: {\n      marginTop: -theme.spacing(4),\n    },\n  },\n}));\n\nexport default function Landing() {\n  const classes = useStyles();\n  const downXSmall = useMediaQuery((theme) => theme.breakpoints.down('xs'));\n\n  return (\n    <Grid className={classes.pageFrame}>\n      <LandingHeader />\n      <Grid\n        className={classes.page}\n        container\n        direction=\"column\"\n        spacing={downXSmall ? 4 : 8}\n      >\n        <Grid item>\n          <LandingWelcome />\n        </Grid>\n\n        <Grid item>\n          <Typography className={classes.sectionTitle} variant=\"h4\">\n            Search a book\n          </Typography>\n        </Grid>\n        <Grid item className={classes.searchBar}>\n          <LandingSearch />\n        </Grid>\n\n        <Grid item>\n          <Typography className={classes.sectionTitle} variant=\"h4\">\n            Features\n          </Typography>\n        </Grid>\n        <Grid item>\n          <Grid\n            container\n            spacing={downXSmall ? 4 : 8}\n            direction={downXSmall ? 'column' : 'row'}\n            alignItems=\"flex-start\"\n            justify=\"center\"\n          >\n            {features.map((feature, index) => (\n              <Grid\n                item\n                key={index}\n                // Show 1 feature per row\n                xs={12}\n                // Show 2-3 features per row\n                sm={features.length % 3 === 0 ? 4 : 6}\n                // Show 3-4 features per row\n                lg={features.length % 4 === 0 ? 3 : 4}\n              >\n                <FeatureCard\n                  icon={feature.icon}\n                  title={feature.title}\n                  description={feature.description}\n                />\n              </Grid>\n            ))}\n          </Grid>\n        </Grid>\n\n        <Grid item>\n          <Typography className={classes.sectionTitle} variant=\"h4\">\n            About us\n          </Typography>\n        </Grid>\n        <Grid item>\n          <LandingAbout />\n        </Grid>\n        <Grid item>\n          <LandingCredits />\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n","import axios from 'axios';\nimport { BASE_URL, failureWith, successWith, withAuth } from './base';\n\nexport const exploreBooks = (onSuccess, onFailure, cancelToken) => {\n  axios\n    .get(`${BASE_URL}/books/explore`, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure));\n};\n\nexport const searchBookBy = (\n  onSuccess,\n  onFailure,\n  cancelToken,\n  searchQuery\n) => {\n  axios\n    .get(\n      `${BASE_URL}/books/search`,\n      withAuth({\n        params: { searchQuery },\n        cancelToken,\n      })\n    )\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 500, 422));\n};\n\nexport const getSellingBooks = (onSuccess, onFailure, cancelToken) => {\n  axios\n    .get(`${BASE_URL}/books/selling`, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure));\n};\n\nexport const getSoldBooks = (onSuccess, onFailure, cancelToken) => {\n  axios\n    .get(`${BASE_URL}/books/sold`, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure));\n};\n\nexport const sellBook = (onSuccess, onFailure, cancelToken, newBook) => {\n  axios\n    .post(`${BASE_URL}/books/sell`, newBook, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 422));\n};\n\nexport const editBook = (\n  onSuccess,\n  onFailure,\n  cancelToken,\n  bookId,\n  newBook\n) => {\n  axios\n    .put(`${BASE_URL}/books/edit/${bookId}`, newBook, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 422));\n};\n\nexport const removeBook = (onSuccess, onFailure, cancelToken, bookId) => {\n  axios\n    .delete(`${BASE_URL}/books/remove/${bookId}`, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure));\n};\n\nexport const uploadBookImage = (onSuccess, onFailure, cancelToken, file) => {\n  const fd = new FormData();\n  fd.append('book-picture', file, file.name);\n  axios\n    .post(`${BASE_URL}/books/picture/upload`, fd, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 415, 500));\n};\n\nexport const getSellLink = (onSuccess, onFailure, cancelToken, bookId) => {\n  axios\n    .get(\n      `${BASE_URL}/books/sell/link/${bookId}`,\n      withAuth({\n        cancelToken,\n      })\n    )\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure));\n};\n\nexport const confirmSell = (\n  onSuccess,\n  onFailure,\n  cancelToken,\n  transactionId\n) => {\n  axios\n    .post(\n      `${BASE_URL}/books/sell/confirm/${transactionId}`,\n      {},\n      withAuth({\n        cancelToken,\n      })\n    )\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 500));\n};\n\nexport const getBookByTransaction = (\n  onSuccess,\n  onFailure,\n  cancelToken,\n  transactionId\n) => {\n  axios\n    .get(\n      `${BASE_URL}/books/by-transaction/${transactionId}`,\n      withAuth({\n        cancelToken,\n      })\n    )\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 500));\n};\n\nexport const getBookById = (onSuccess, onFailure, cancelToken, bookId) => {\n  axios\n    .get(\n      `${BASE_URL}/books/by-id/${bookId}`,\n      withAuth({\n        cancelToken,\n      })\n    )\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 500));\n};\n","import React, { useState } from 'react';\nimport { ClickAwayListener, Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchResults from 'components/landing/SearchResults';\nimport SearchBar from 'components/landing/SearchBar';\nimport { useAxios } from 'hooks/axios';\nimport { debounce } from 'utils/functions';\nimport { searchBookBy } from 'api/books';\n\nconst useStyles = makeStyles((theme) => ({\n  searchCard: {\n    position: 'relative',\n    borderRadius: 20,\n    height: 'auto',\n    // offset-x | offset-y | blur-radius | spread-radius\n    '&:hover': {\n      boxShadow: `0px 10px 25px -5px ${theme.palette.custom.shadowGray}`,\n    },\n  },\n}));\n\nexport default function ExploreSearch() {\n  const classes = useStyles();\n  const [hideSearch, setHideSearch] = useState(true);\n  const [fetch, cancelPrevious, data, , isLoading] = useAxios(\n    searchBookBy,\n    'searching'\n  );\n\n  const handleSearch = debounce((query) => {\n    fetch(query);\n    return () => cancelPrevious();\n  }, 250);\n\n  const showSearchResults = !hideSearch && data && data.length > 0;\n\n  return (\n    <ClickAwayListener onClickAway={() => setHideSearch(true)}>\n      <Paper\n        className={classes.searchCard}\n        variant=\"outlined\"\n        onClick={() => setHideSearch(false)}\n      >\n        <SearchBar onSearching={handleSearch} isLoading={isLoading} />\n        {showSearchResults && <SearchResults books={data} showSignup={false} />}\n      </Paper>\n    </ClickAwayListener>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Carousel from 'react-material-ui-carousel';\nimport { Grid, Paper, Typography } from '@material-ui/core';\nimport { useHistory } from 'react-router-dom';\nimport { BOOK_ROUTE, toRoute } from 'routing/helpers';\nimport VerticalRectangular from '../../VerticalRectangular';\n\nconst useStyles = makeStyles((theme) => ({\n  bookCard: {\n    padding: theme.spacing(2),\n    [theme.breakpoints.up('sm')]: {\n      padding: theme.spacing(4),\n    },\n    '&:hover': {\n      boxShadow: `0px 10px 25px -5px ${theme.palette.custom.shadowGray}`,\n    },\n    borderRadius: 20,\n  },\n  bookTitle: {\n    fontWeight: 'bold',\n  },\n  bookCover: {\n    [theme.breakpoints.up('xs')]: {\n      width: '100px',\n      height: '150px',\n    },\n    [theme.breakpoints.up('sm')]: {\n      width: '133px',\n      height: '200px',\n    },\n  },\n}));\n\nexport default function PopularBooks({ books }) {\n  return (\n    <Carousel\n      interval={10000}\n      animation=\"slide\"\n      navButtonsAlwaysInvisible={true}\n    >\n      {books.map((book, index) => (\n        <PopularBook key={index} book={book} />\n      ))}\n    </Carousel>\n  );\n}\n\nfunction PopularBook({ book }) {\n  const classes = useStyles();\n  const history = useHistory();\n  const openBook = () => history.push(toRoute(BOOK_ROUTE, book.bookId));\n\n  return (\n    <Paper className={classes.bookCard} variant=\"outlined\" onClick={openBook}>\n      <Grid container justify=\"space-between\" alignItems=\"center\" spacing={2}>\n        <Grid item>\n          <Grid\n            container\n            direction=\"column\"\n            justify=\"center\"\n            alignItems=\"flex-start\"\n            spacing={1}\n          >\n            <Grid item>\n              <Typography className={classes.bookTitle} variant=\"h3\">\n                {book.title}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography className={classes.bookTitle} variant=\"h6\">\n                {`${book.currency} ${book.amount}`}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"body1\">\n                The book is in <b>{book.condition}</b> conditions\n              </Typography>\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item>\n          <VerticalRectangular className={classes.bookCover}>\n            <img alt={`book cover of ${book.title}`} src={book.pictures[0]} />\n          </VerticalRectangular>\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Grid, Typography } from '@material-ui/core';\nimport { BOOK_ROUTE, toRoute } from 'routing/helpers';\nimport { useHistory } from 'react-router-dom';\nimport VerticalRectangular from 'components/VerticalRectangular';\n\nconst useStyles = makeStyles((theme) => ({\n  bookCover: {\n    [theme.breakpoints.up('xs')]: {\n      width: '100px',\n      height: '150px',\n    },\n    [theme.breakpoints.up('sm')]: {\n      width: '133px',\n      height: '200px',\n    },\n    boxShadow: `1px 1px 5px 1px ${theme.palette.custom.shadowGray}`,\n    '&:hover': {\n      boxShadow: `3px 3px 15px 3px ${theme.palette.custom.shadowGray}`,\n    },\n  },\n  bookTitle: {\n    [theme.breakpoints.up('xs')]: {\n      width: '100px',\n    },\n    [theme.breakpoints.up('sm')]: {\n      width: '150px',\n    },\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n  bookPrice: {\n    fontWeight: 'normal',\n  },\n}));\n\nexport default function BooksGallery({ books }) {\n  return (\n    <Grid container spacing={3}>\n      {books?.map((book, index) => (\n        <Grid key={index} item>\n          <Book book={book} />\n        </Grid>\n      ))}\n    </Grid>\n  );\n}\n\nfunction Book({ book }) {\n  const classes = useStyles();\n  const history = useHistory();\n  const openBook = () => history.push(toRoute(BOOK_ROUTE, book.bookId));\n\n  return (\n    <Grid\n      container\n      alignItems=\"flex-start\"\n      direction=\"column\"\n      spacing={1}\n      onClick={openBook}\n    >\n      <Grid item xs={12}>\n        <VerticalRectangular className={classes.bookCover}>\n          <img alt={`book cover of ${book.title}`} src={book.pictures[0]} />\n        </VerticalRectangular>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography className={classes.bookTitle} variant=\"h6\">\n          {book.title}\n        </Typography>\n        <Typography\n          className={classes.bookPrice}\n          variant=\"h6\"\n        >{`${book.currency} ${book.amount}`}</Typography>\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { Player } from '@lottiefiles/react-lottie-player';\nimport girlTappingPhone from 'animations/girl-tapping-phone.json';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  girlAnimation: {\n    height: '200px',\n    [theme.breakpoints.up('sm')]: {\n      height: '300px',\n    },\n    marginTop: 16,\n  },\n}));\n\nexport default function ExploreWelcome() {\n  const classes = useStyles();\n  return (\n    <>\n      <Typography variant=\"body1\">\n        In this section, you will be able to search, discover new and engaging\n        books. Immerse yourself into our collection and unleash the reading\n        enthusiast in you!\n      </Typography>\n      <Player\n        className={classes.girlAnimation}\n        autoplay\n        loop\n        keepLastFrame\n        src={girlTappingPhone}\n      />\n    </>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { Grid, Typography, useMediaQuery } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExploreSearch from 'components/explore/ExploreSearch';\nimport { pageFrame } from 'theming';\nimport PopularBooks from 'components/explore/PopularBooks';\nimport { useAxios } from 'hooks/axios';\nimport { exploreBooks } from 'api/books';\nimport MayInterestYouBooks from 'components/explore/MayInterestYouBooks';\nimport RecentlyViewedBooks from 'components/explore/RecentlyViewedBooks';\nimport ExploreWelcome from 'components/explore/ExploreWelcome';\n\nconst sections = [\n  {\n    title: 'Welcome to the explore page',\n    component: ExploreWelcome,\n    getBooks: (data) =>\n      data?.popular?.length +\n        data?.mayInterestYou?.length +\n        data?.recentlyViewed?.length ===\n      0,\n  },\n  {\n    title: 'Popular',\n    component: PopularBooks,\n    getBooks: (data) => data?.popular?.length > 0 && data?.popular,\n  },\n  {\n    title: 'Search',\n    component: ExploreSearch,\n  },\n  {\n    title: 'May interest you',\n    component: MayInterestYouBooks,\n    getBooks: (data) =>\n      data?.mayInterestYou?.length > 0 && data?.mayInterestYou,\n  },\n  {\n    title: 'Recently viewed',\n    component: RecentlyViewedBooks,\n    getBooks: (data) =>\n      data?.recentlyViewed?.length > 0 && data?.recentlyViewed,\n  },\n];\n\nconst useStyles = makeStyles((theme) => ({\n  ...pageFrame(theme),\n  sectionTitle: {\n    fontWeight: 'bold',\n  },\n}));\n\nexport default function Explore() {\n  const classes = useStyles();\n  const downXSmall = useMediaQuery((theme) => theme.breakpoints.down('xs'));\n\n  return (\n    <Grid className={classes.pageFrame} container spacing={downXSmall ? 3 : 6}>\n      {sections.map((section, index) => (\n        <Section key={index} section={section} />\n      ))}\n    </Grid>\n  );\n}\n\nfunction Section({ section }) {\n  const classes = useStyles();\n\n  const [fExploreBooks, cExploreBooks, data, ,] = useAxios(\n    exploreBooks,\n    'fetching books to explore'\n  );\n\n  useEffect(() => {\n    fExploreBooks();\n    return () => cExploreBooks();\n  }, []);\n\n  const sectionContainsBooks = !!section.getBooks;\n  const books = sectionContainsBooks && section.getBooks(data);\n\n  return (\n    ((!sectionContainsBooks || books) && (\n      <Grid item xs={12}>\n        <Grid container direction=\"column\" spacing={2}>\n          <Grid item>\n            <Typography className={classes.sectionTitle} variant=\"h4\">\n              {section.title}\n            </Typography>\n          </Grid>\n          <Grid item>\n            <section.component books={books} />\n          </Grid>\n        </Grid>\n      </Grid>\n    )) ||\n    null\n  );\n}\n","import React from 'react';\nimport BooksGallery from 'components/explore/BooksGallery';\n\nexport default function MayInterestYouBooks({ books }) {\n  return <BooksGallery books={books} />;\n}\n","import React from 'react';\nimport BooksGallery from 'components/explore/BooksGallery';\n\nexport default function MayInterestYouBooks({ books }) {\n  return <BooksGallery books={books} />;\n}\n","const formatStringDate = (date) => {\n  const options = {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  };\n  return new Date(date).toLocaleString('en-US', options);\n};\n\nexport default formatStringDate;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { Button, Grid, Link } from '@material-ui/core';\nimport CreateIcon from '@material-ui/icons/Create';\nimport ShareIcon from '@material-ui/icons/Share';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport { Skeleton } from '@material-ui/lab';\nimport formatStringDate from 'utils/dates';\nimport { useHistory } from 'react-router-dom';\nimport { Player } from '@lottiefiles/react-lottie-player';\nimport { BOOK_ROUTE, toRoute } from 'routing/helpers';\nimport bookBounceOpen from 'animations/book-bounce-open.json';\nimport VerticalRectangular from 'components/VerticalRectangular';\n\nconst useStyles = makeStyles((theme) => ({\n  sectionGrid: {\n    marginTop: -theme.spacing(3),\n  },\n  sectionHeader: {\n    fontWeight: 'bold',\n    marginBottom: -theme.spacing(1),\n  },\n  bookContainer: {\n    [theme.breakpoints.up('md')]: {\n      backgroundColor: theme.palette.background.paper,\n      borderRadius: 20,\n      borderWidth: 1,\n      borderColor: theme.palette.divider,\n      borderStyle: 'solid',\n      padding: theme.spacing(2),\n    },\n  },\n  bookCover: {\n    [theme.breakpoints.up('xs')]: {\n      width: '100px',\n      minWidth: '100px',\n      maxWidth: '100px',\n      height: '150px',\n      minHeight: '150px',\n      maxHeight: '150px',\n    },\n    [theme.breakpoints.up('md')]: {\n      width: '120px',\n      minWidth: '120px',\n      maxWidth: '120px',\n      height: '180px',\n      minHeight: '180px',\n      maxHeight: '180px',\n    },\n  },\n  sellButton: {\n    backgroundColor: fade(theme.palette.success.main, 0.2),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.success.main, 0.5),\n    },\n    width: '100%',\n    color: theme.palette.success.main,\n  },\n  editButton: {\n    backgroundColor: fade(theme.palette.primary.dark, 0.2),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.primary.dark, 0.5),\n    },\n    color: theme.palette.primary.dark,\n    width: '100%',\n  },\n  removeButton: {\n    backgroundColor: fade(theme.palette.error.main, 0.2),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.error.main, 0.5),\n    },\n    color: theme.palette.error.main,\n    width: '100%',\n  },\n  sellingText: {},\n  soldText: {\n    textDecoration: 'line-through',\n  },\n  skeletonCover: {\n    [theme.breakpoints.up('xs')]: {\n      width: '100px',\n      height: '160px',\n    },\n    [theme.breakpoints.up('md')]: {\n      width: '120px',\n      height: '180px',\n    },\n  },\n  skeletonTitle: {\n    [theme.breakpoints.up('sm')]: {\n      width: '400px',\n    },\n    [theme.breakpoints.up('md')]: {\n      width: '500px',\n    },\n  },\n  skeletonSubtitle: {\n    [theme.breakpoints.up('sm')]: {\n      width: '200px',\n    },\n    [theme.breakpoints.up('md')]: {\n      width: '300px',\n    },\n  },\n}));\n\nexport default function SellBooksList({\n  loadingSelling,\n  loadingSold,\n  sellingBooks,\n  soldBooks,\n  onEdit,\n  onRemove,\n  onSellLink,\n}) {\n  const classes = useStyles();\n\n  const sections = [\n    {\n      title: 'Selling',\n      data: sellingBooks,\n      isLoading: loadingSelling,\n      isSold: false,\n      showSection: loadingSelling || (sellingBooks && sellingBooks.length > 0),\n    },\n    {\n      title: 'Sold',\n      data: soldBooks,\n      isLoading: loadingSold,\n      isSold: true,\n      showSection: loadingSold || (soldBooks && soldBooks.length > 0),\n    },\n  ];\n\n  const empty = sections.every((section) => !section.showSection);\n\n  return empty ? (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"center\"\n      alignItems=\"center\"\n      spacing={2}\n      style={{ height: '60vh' }}\n    >\n      <Grid item>\n        <Player\n          autoplay\n          keepLastFrame\n          src={bookBounceOpen}\n          style={{ height: '150px' }}\n        />\n      </Grid>\n      <Grid item>\n        <Typography variant=\"h6\">{`Start selling a book now`}</Typography>\n      </Grid>\n    </Grid>\n  ) : (\n    <Grid container direction=\"column\" spacing={6}>\n      {sections\n        .filter((section) => section.showSection)\n        .map((section, sectionIndex) => (\n          <Grid key={sectionIndex} item xs={12}>\n            <Grid\n              container\n              className={classes.sectionGrid}\n              direction=\"column\"\n              spacing={4}\n            >\n              <Grid item>\n                <Typography className={classes.sectionHeader} variant=\"h4\">\n                  {section.title}\n                </Typography>\n              </Grid>\n              {section.isLoading ? (\n                <Grid item>\n                  <SkeletonBook isSold={section.isSold} />\n                </Grid>\n              ) : (\n                section.data.map((book, bookIndex) => (\n                  <Grid key={bookIndex} item>\n                    <Book\n                      isSold={section.isSold}\n                      book={book}\n                      onEdit={onEdit}\n                      onRemove={onRemove}\n                      onSellLink={onSellLink}\n                    />\n                  </Grid>\n                ))\n              )}\n            </Grid>\n          </Grid>\n        ))}\n    </Grid>\n  );\n}\n\nfunction Book({ isSold, book, onEdit, onRemove, onSellLink }) {\n  const classes = useStyles();\n  const history = useHistory();\n  const openBook = () => history.push(toRoute(BOOK_ROUTE, book.bookId));\n\n  return (\n    <Grid className={classes.bookContainer} container spacing={2}>\n      <Grid item xs={12}>\n        <Grid container spacing={2} alignItems=\"center\">\n          <Grid item>\n            <VerticalRectangular className={classes.bookCover}>\n              <img\n                src={book.pictures[0]}\n                alt={`book cover of ${book.title}`}\n                onClick={openBook}\n              />\n            </VerticalRectangular>\n          </Grid>\n          <Grid item>\n            <Grid\n              container\n              direction=\"column\"\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              spacing={1}\n            >\n              <Grid item>\n                <Link variant=\"h6\" color=\"inherit\" onClick={openBook}>\n                  <b>{book.title}</b>\n                </Link>\n              </Grid>\n              <Grid\n                className={isSold ? classes.soldText : classes.sellingText}\n                item\n              >\n                <Typography variant=\"h6\">\n                  {`${book.currency} ${book.amount}`}\n                </Typography>\n              </Grid>\n              <Grid item>\n                <Typography variant=\"body1\">\n                  {isSold\n                    ? `Sold to ${book.buyer} on ${formatStringDate(\n                        book.saleDate\n                      )}`\n                    : `Publication date: ${formatStringDate(\n                        book.publicationDate\n                      )}`}\n                </Typography>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n      {!isSold && (\n        <Grid item xs={12}>\n          <Grid container direction=\"column\" spacing={1}>\n            <Grid item>\n              <Grid container spacing={1}>\n                <Grid item xs={12} sm={6}>\n                  <Button\n                    className={classes.editButton}\n                    variant=\"contained\"\n                    disableElevation={true}\n                    startIcon={<CreateIcon />}\n                    onClick={() => onEdit(book)}\n                  >\n                    Edit\n                  </Button>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Button\n                    className={classes.removeButton}\n                    variant=\"contained\"\n                    disableElevation={true}\n                    startIcon={<DeleteForeverIcon />}\n                    onClick={() => onRemove(book)}\n                  >\n                    Remove\n                  </Button>\n                </Grid>\n              </Grid>\n            </Grid>\n            <Grid item xs={12}>\n              <Button\n                className={classes.sellButton}\n                variant=\"contained\"\n                disableElevation={true}\n                startIcon={<ShareIcon />}\n                onClick={() => onSellLink(book)}\n              >\n                Share Sell Link\n              </Button>\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n    </Grid>\n  );\n}\n\nfunction SkeletonBook({ isSold }) {\n  const classes = useStyles();\n\n  return (\n    <Grid className={classes.bookContainer} container spacing={2}>\n      <Grid item xs={12}>\n        <Grid container spacing={2}>\n          <Grid item>\n            <Skeleton className={classes.skeletonCover} variant=\"rect\" />\n          </Grid>\n          <Grid item>\n            <Grid\n              container\n              direction=\"column\"\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              spacing={1}\n            >\n              <Grid className={classes.skeletonTitle} item>\n                <Typography variant=\"h6\">\n                  <Skeleton />\n                </Typography>\n              </Grid>\n              <Grid className={classes.skeletonSubtitle} item>\n                <Typography variant=\"h6\">\n                  <Skeleton />\n                </Typography>\n              </Grid>\n              <Grid className={classes.skeletonSubtitle} item>\n                <Typography variant=\"body1\">\n                  <Skeleton />\n                </Typography>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n      {!isSold && (\n        <Grid item xs={12}>\n          <Grid container direction=\"column\" spacing={1}>\n            <Grid item>\n              <Grid container spacing={1}>\n                <Grid item xs={12} sm={6}>\n                  <Skeleton variant=\"rect\" />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Skeleton variant=\"rect\" />\n                </Grid>\n              </Grid>\n            </Grid>\n            <Grid item xs={12}>\n              <Skeleton variant=\"rect\" />\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n    </Grid>\n  );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Grid from '@material-ui/core/Grid';\nimport { CircularProgress } from '@material-ui/core';\nimport { themedBorderRadius } from '../../theming';\n\nconst sanitizeEvent = (block) => (event) => {\n  event.stopPropagation();\n  block(event.target.value);\n};\n\nexport default function ConfirmationDialog({\n  title,\n  details,\n  onCancel,\n  onConfirm,\n  isLoading,\n  loadingCancellable,\n}) {\n  return (\n    <Dialog\n      PaperProps={{\n        style: { borderRadius: themedBorderRadius },\n      }}\n      fullScreen={false}\n      fullWidth={true}\n      open={true}\n      onClose={(event) => {\n        if (loadingCancellable || !isLoading) onCancel(event);\n      }}\n    >\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{details}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n          spacing={2}\n        >\n          <Grid item>\n            <Button\n              onClick={sanitizeEvent(onCancel)}\n              disabled={!loadingCancellable && isLoading}\n            >\n              Cancel\n            </Button>\n            <Button onClick={sanitizeEvent(onConfirm)} disabled={isLoading}>\n              Confirm\n            </Button>\n          </Grid>\n          {isLoading && (\n            <Grid item style={{ paddingLeft: '24px' }}>\n              <CircularProgress\n                variant=\"indeterminate\"\n                disableShrink\n                color=\"secondary\"\n                size={20}\n                thickness={4}\n              />\n            </Grid>\n          )}\n        </Grid>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { Grid, useTheme, Zoom } from '@material-ui/core';\nimport SellBooksList from 'components/SellBooksList';\nimport {\n  EDIT_SELL_ROUTE,\n  LINK_SELL_ROUTE,\n  NEW_SELL_ROUTE,\n  REMOVE_SELL_ROUTE,\n  renderRoute,\n  toRoute,\n} from 'routing/helpers';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useHistory } from 'react-router-dom';\nimport { useAxios } from 'hooks/axios';\nimport { getSellingBooks, getSoldBooks, removeBook } from 'api/books';\nimport ConfirmationDialog from 'components/ConfirmationDialog';\nimport { pageFrame } from 'theming';\n\nconst useStyles = makeStyles((theme) => ({\n  ...pageFrame(theme),\n  fab: {\n    position: 'fixed',\n    // Thin bottom navigation\n    [theme.breakpoints.up('xs')]: {\n      bottom: theme.spacing(9),\n    },\n    // Fat bottom navigation\n    [theme.breakpoints.up('sm')]: {\n      bottom: theme.spacing(10),\n    },\n    // Left drawer\n    [theme.breakpoints.up('smmd')]: {\n      bottom: theme.spacing(2),\n    },\n\n    right: theme.spacing(2),\n  },\n}));\n\nexport default function Sell({ routes }) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const transitionDuration = {\n    enter: theme.transitions.duration.enteringScreen,\n    exit: theme.transitions.duration.leavingScreen,\n  };\n  const [bookToEdit, setBookToEdit] = useState(undefined);\n  const [bookToRemove, setBookToRemove] = useState(undefined);\n  const [bookToLink, setBookToLink] = useState(undefined);\n  const history = useHistory();\n  const [newSellRoute, editSellRoute, removeSellRoute, linkSellRoute] = routes;\n\n  const [\n    fetchSellingBooks,\n    cancelSelling,\n    sellingBooks = [],\n    ,\n    isLoadingSelling,\n  ] = useAxios(getSellingBooks, 'fetching selling books');\n  const [\n    fetchSoldBooks,\n    cancelSold,\n    soldBooks = [],\n    ,\n    isLoadingSold,\n  ] = useAxios(getSoldBooks, 'fetching sold books');\n\n  // These two effects are applied only on mounting.\n  // They are only cleaned up on unmounting.\n  useEffect(() => {\n    fetchSellingBooks();\n    return () => cancelSelling();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    fetchSoldBooks();\n    return () => cancelSold();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const backToParent = (doRefresh) => () => {\n    history.goBack();\n    if (doRefresh) {\n      fetchSellingBooks();\n      fetchSoldBooks();\n    }\n  };\n\n  return (\n    <>\n      {newSellRoute && renderRoute(newSellRoute, { backToParent })}\n      {editSellRoute &&\n        bookToEdit &&\n        renderRoute(editSellRoute, { backToParent, bookToEdit })}\n      {removeSellRoute &&\n        bookToRemove &&\n        renderRoute(removeSellRoute, { backToParent, bookToRemove })}\n      {linkSellRoute &&\n        bookToLink &&\n        renderRoute(linkSellRoute, { backToParent, bookToLink })}\n      <Grid className={classes.pageFrame} container>\n        <Grid item xs={12}>\n          <SellBooksList\n            loadingSelling={isLoadingSelling}\n            loadingSold={isLoadingSold}\n            sellingBooks={sellingBooks}\n            soldBooks={soldBooks}\n            onEdit={(book) => {\n              setBookToEdit(book);\n              history.push(toRoute(EDIT_SELL_ROUTE));\n            }}\n            onRemove={(book) => {\n              setBookToRemove(book);\n              history.push(toRoute(REMOVE_SELL_ROUTE));\n            }}\n            onSellLink={(book) => {\n              setBookToLink(book);\n              history.push(toRoute(LINK_SELL_ROUTE));\n            }}\n          />\n        </Grid>\n      </Grid>\n      <Zoom\n        in={true}\n        timeout={transitionDuration}\n        style={{\n          transitionDelay: `${transitionDuration.exit}ms`,\n        }}\n        unmountOnExit\n      >\n        <Fab\n          className={classes.fab}\n          color=\"primary\"\n          elevation={24}\n          aria-label=\"sell-book\"\n          onClick={() => history.push(toRoute(NEW_SELL_ROUTE))}\n        >\n          <AddIcon />\n        </Fab>\n      </Zoom>\n    </>\n  );\n}\n\nexport function BookRemoveDialog({ backToParent, bookToRemove }) {\n  const [remove, cancelRemoval, , , isLoadingRemoval] = useAxios(\n    removeBook,\n    'removing book',\n    backToParent(true)\n  );\n\n  const handleConfirm = () => remove(bookToRemove.bookId);\n  const handleCancel = () => {\n    cancelRemoval();\n    backToParent(false)();\n  };\n\n  return (\n    <ConfirmationDialog\n      title={`Are you sure you want to remove '${bookToRemove.title}'?`}\n      onConfirm={handleConfirm}\n      onCancel={handleCancel}\n      isLoading={isLoadingRemoval}\n    />\n  );\n}\n","import { Link, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { EDIT_PROFILE_ROUTE, toRoute } from 'routing/helpers';\n\nexport default function ProfileTypography({\n  text,\n  errorText = 'Missing information',\n  show,\n  successVariant = 'body1',\n  errorVariant = 'body1',\n}) {\n  const history = useHistory();\n\n  return (\n    <>\n      {!show && (\n        <Link\n          variant={errorVariant}\n          color=\"textSecondary\"\n          onClick={() => history.push(toRoute(EDIT_PROFILE_ROUTE))}\n        >\n          <b>{errorText}</b>\n        </Link>\n      )}\n      {show && <Typography variant={successVariant}>{text}</Typography>}\n    </>\n  );\n}\n","import React, { useState } from 'react';\nimport { Avatar, Grid, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ProfileTypography from 'components/profile/ProfileTypography';\nimport AddPhotoIcon from '@material-ui/icons/AddPhotoAlternateOutlined';\nimport { useHistory } from 'react-router-dom';\nimport { EDIT_PROFILE_PICTURE_ROUTE, toRoute } from 'routing/helpers';\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    width: '150px',\n    height: '150px',\n    color: theme.palette.primary.dark,\n    backgroundColor: theme.palette.primary.main,\n  },\n  icon: {\n    color: theme.palette.divider,\n    height: '60px',\n    width: '60px',\n  },\n}));\n\nexport default function ProfileHeader({ fields }) {\n  const classes = useStyles();\n  const [mouseOnAvatar, setMouseOnAvatar] = useState(false);\n  const history = useHistory();\n\n  const [username, name, surname, picture] = fields;\n\n  return (\n    <Grid container justify=\"flex-start\" alignItems=\"center\" spacing={2}>\n      <Grid item>\n        <Avatar\n          className={classes.avatar}\n          src={mouseOnAvatar ? undefined : picture.data}\n          onMouseOver={() => setMouseOnAvatar(true)}\n          onMouseLeave={() => setMouseOnAvatar(false)}\n          onClick={() => history.push(toRoute(EDIT_PROFILE_PICTURE_ROUTE))}\n        >\n          {mouseOnAvatar ? (\n            <AddPhotoIcon className={classes.icon} alt=\"Profile photo\" />\n          ) : undefined}\n        </Avatar>\n      </Grid>\n      <Grid item>\n        <Grid\n          container\n          direction=\"column\"\n          justify=\"center\"\n          alignItems=\"flex-start\"\n          spacing={1}\n        >\n          <Grid item>\n            <Grid container alignItems=\"center\" spacing={1}>\n              <Grid item>\n                <ProfileTypography\n                  text={name.data}\n                  errorText=\"Missing name\"\n                  show={name.data}\n                  successVariant=\"h5\"\n                  errorVariant=\"h6\"\n                />\n              </Grid>\n              <Grid item>\n                <ProfileTypography\n                  text={surname.data}\n                  errorText=\"Missing surname\"\n                  show={surname.data}\n                  successVariant=\"h5\"\n                  errorVariant=\"h6\"\n                />\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item>\n            <Typography variant=\"h6\">@{username.data}</Typography>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { Button, Grid, Typography } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { useHistory } from 'react-router-dom';\nimport ProfileTypography from 'components/profile/ProfileTypography';\nimport { EDIT_PROFILE_ROUTE, toRoute } from 'routing/helpers';\n\nexport default function ProfileInformation({ fields }) {\n  const history = useHistory();\n\n  const openEditDialog = () => {\n    history.push(toRoute(EDIT_PROFILE_ROUTE));\n  };\n\n  return (\n    <Grid container direction=\"column\" spacing={2}>\n      <Grid item>\n        <Grid\n          container\n          direction=\"row\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n          spacing={2}\n        >\n          <Grid item>\n            <Typography variant=\"h4\">\n              <b>Personal information</b>\n            </Typography>\n          </Grid>\n          <Grid item>\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              disableElevation={true}\n              startIcon={<EditIcon />}\n              onClick={openEditDialog}\n            >\n              Update Profile\n            </Button>\n          </Grid>\n        </Grid>\n      </Grid>\n      {fields.map((field, index) => (\n        <Grid key={index} item>\n          <Typography variant=\"h6\">\n            <b>{field.displayName}</b>\n          </Typography>\n          <ProfileTypography\n            text={field.data}\n            show={field.data}\n            successVariant=\"body1\"\n          />\n        </Grid>\n      ))}\n    </Grid>\n  );\n}\n","import axios from 'axios';\nimport { BASE_URL, failureWith, successWith, withAuth } from './base';\n\nexport const getProfileDetails = (onSuccess, onFailure, cancelToken) => {\n  axios\n    .get(`${BASE_URL}/profile/details`, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure));\n};\n\nexport const getProfileDetailsById = (\n  onSuccess,\n  onFailure,\n  cancelToken,\n  userId\n) => {\n  axios\n    .get(`${BASE_URL}/profile/details/${userId}`, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure));\n};\n\nexport const editProfile = (\n  onSuccess,\n  onFailure,\n  cancelToken,\n  profileDetails\n) => {\n  axios\n    .put(`${BASE_URL}/profile/edit`, profileDetails, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure));\n};\n\nexport const uploadProfilePicture = (\n  onSuccess,\n  onFailure,\n  cancelToken,\n  file\n) => {\n  const fd = new FormData();\n  fd.append('profile-picture', file, file.name);\n  axios\n    .post(`${BASE_URL}/profile/picture/upload`, fd, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 415, 500));\n};\n\nexport const removeProfilePicture = (onSuccess, onFailure, cancelToken) => {\n  axios\n    .delete(`${BASE_URL}/profile/picture/remove`, withAuth({ cancelToken }))\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 415, 500));\n};\n","import React from 'react';\nimport {\n  Grid,\n  LinearProgress,\n  makeStyles,\n  Paper,\n  Typography,\n  useMediaQuery,\n  withStyles,\n} from '@material-ui/core';\nimport { Player } from '@lottiefiles/react-lottie-player';\nimport profilePasswordUnlock from 'animations/profile-password-unlock.json';\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles((theme) => ({\n  card: {\n    padding: theme.spacing(2),\n    borderRadius: 20,\n  },\n  animation: {\n    height: '200px',\n  },\n  animationSmall: {\n    height: '150px',\n  },\n}));\n\nexport default function CompleteProfileBanner({ progress }) {\n  const classes = useStyles();\n  const downSmall = useMediaQuery((theme) =>\n    theme.breakpoints.down(theme.breakpoints.values.sm)\n  );\n\n  return (\n    <Paper className={classes.card} variant=\"outlined\">\n      <Grid\n        container\n        direction={downSmall ? 'column' : 'row'}\n        justify=\"center\"\n        alignItems=\"center\"\n        spacing={2}\n      >\n        <Grid item xs={12} sm={4}>\n          <div\n            className={clsx(\n              classes.animation,\n              downSmall && classes.animationSmall\n            )}\n          >\n            <Player\n              className={clsx(\n                classes.animation,\n                downSmall && classes.animationSmall\n              )}\n              style={!downSmall && { marginLeft: '-20%' }}\n              autoplay\n              loop\n              keepLastFrame\n              src={profilePasswordUnlock}\n            />\n          </div>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Grid container direction=\"column\" spacing={1}>\n            <Grid item>\n              <Typography variant=\"h6\">\n                <b>Complete your profile</b>\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"body1\">\n                Did you know that having a complete profile greatly increases\n                the chances of selling books? Your profile is now {progress}%\n                completed. Just a few finishing touches!\n              </Typography>\n            </Grid>\n            <Grid item>\n              <CustomLinearProgress value={progress} variant=\"determinate\" />\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n}\n\nconst CustomLinearProgress = withStyles((theme) => ({\n  root: {\n    height: 10,\n    borderRadius: 5,\n  },\n  colorPrimary: {\n    backgroundColor:\n      theme.palette.grey[theme.palette.type === 'light' ? 200 : 700],\n  },\n  bar: {\n    borderRadius: 5,\n  },\n}))(LinearProgress);\n","import axios from 'axios';\nimport { BASE_URL, failureWith, successWith, withAuth } from './base';\n\nexport const changePassword = (\n  onSuccess,\n  onFailure,\n  cancelToken,\n  oldPassword,\n  newPassword\n) => {\n  axios\n    .put(\n      `${BASE_URL}/auth/password/change`,\n      { oldPassword, newPassword },\n      withAuth({ cancelToken })\n    )\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure));\n};\n\nexport const checkIdentity = (\n  onSuccess,\n  onFailure,\n  cancelToken,\n  usernameOrEmail\n) => {\n  axios\n    .post(`${BASE_URL}/auth/check`, { usernameOrEmail })\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 422));\n};\n\nexport const signup = (onSuccess, onFailure, cancelToken, newUser) => {\n  axios\n    .post(`${BASE_URL}/auth/signup`, {\n      email: newUser.email,\n      username: newUser.username,\n      password: newUser.password,\n    })\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 422, 512));\n};\n\nexport const login = (\n  onSuccess,\n  onFailure,\n  cancelToken,\n  usernameOrEmail,\n  password\n) => {\n  axios\n    .post(`${BASE_URL}/auth/login`, {\n      usernameOrEmail,\n      password,\n    })\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 401, 422));\n};\n","import React, { useRef, useState } from 'react';\nimport {\n  FormControl,\n  FormHelperText,\n  IconButton,\n  InputAdornment,\n  InputLabel,\n  OutlinedInput,\n} from '@material-ui/core';\nimport { Visibility, VisibilityOff } from '@material-ui/icons';\n\nexport default function PasswordField(props) {\n  const {\n    autoComplete,\n    autoFocus = false,\n    children,\n    className,\n    color = 'primary',\n    defaultValue,\n    disabled = false,\n    error = false,\n    FormHelperTextProps,\n    helperText,\n    hiddenLabel,\n    id,\n    InputLabelProps,\n    inputProps,\n    InputProps,\n    label,\n    multiline = false,\n    name,\n    onBlur,\n    onChange,\n    onFocus,\n    placeholder,\n    required = false,\n    rows,\n    rowsMax,\n    SelectProps,\n    type,\n    value,\n    variant = 'standard',\n    ...other\n  } = props;\n  const inputRef = useRef();\n  const [selectionStart, setSelectionStart] = React.useState();\n  const updateSelectionStart = () => {\n    // noinspection JSUnresolvedVariable\n    setSelectionStart(inputRef.current.selectionStart);\n  };\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n\n  const helperTextId = helperText && id ? `${id}-helper-text` : undefined;\n  const inputLabelId = label && id ? `${id}-label` : undefined;\n\n  return (\n    <FormControl\n      className={className}\n      color={color}\n      disabled={disabled}\n      error={error}\n      required={required}\n      variant={variant}\n      onSelect={updateSelectionStart}\n      {...other}\n    >\n      <InputLabel htmlFor={id} id={inputLabelId} {...InputLabelProps}>\n        {label}\n      </InputLabel>\n      <OutlinedInput\n        label={label}\n        aria-describedby={helperTextId}\n        autoComplete={autoComplete}\n        autoFocus={autoFocus}\n        defaultValue={defaultValue}\n        multiline={multiline}\n        name={name}\n        rows={rows}\n        rowsMax={rowsMax}\n        type={showPassword ? 'text' : 'password'}\n        value={value ?? password}\n        id={id}\n        inputRef={inputRef}\n        onBlur={onBlur}\n        onChange={(event) => {\n          setPassword(event.target.value);\n          onChange(event);\n        }}\n        onFocus={onFocus}\n        placeholder={placeholder}\n        inputProps={inputProps}\n        endAdornment={\n          <InputAdornment position=\"end\">\n            <IconButton\n              aria-label=\"toggle password visibility\"\n              onClick={() => {\n                setShowPassword(!showPassword);\n                setTimeout(() => {\n                  inputRef.current.selectionStart = selectionStart;\n                }, 0);\n              }}\n              onMouseDown={handleMouseDownPassword}\n              edge=\"end\"\n            >\n              {showPassword ? <Visibility /> : <VisibilityOff />}\n            </IconButton>\n          </InputAdornment>\n        }\n      />\n      {helperText && (\n        <FormHelperText id={helperTextId} {...FormHelperTextProps}>\n          {helperText}\n        </FormHelperText>\n      )}\n    </FormControl>\n  );\n}\n","import React, { useState } from 'react';\nimport { Button, Grid, Typography } from '@material-ui/core';\nimport LockIcon from '@material-ui/icons/Lock';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useAxios } from '../../../hooks/axios';\nimport { changePassword } from '../../../api/auth';\nimport PasswordField from '../../PasswordField';\n\nconst useStyles = makeStyles((theme) => ({\n  sectionTitle: {\n    marginBottom: theme.spacing(1),\n  },\n}));\n\nexport default function ProfileSecurity() {\n  const classes = useStyles();\n\n  const [oldPassword, setOldPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n\n  const [\n    fChangePassword,\n    cChangePassword,\n    ,\n    changePasswordError,\n    isChangingPassword,\n  ] = useAxios(changePassword, 'changePassword', () => {\n    setOldPassword('');\n    setNewPassword('');\n  });\n\n  const change = () => {\n    cChangePassword();\n    fChangePassword(oldPassword, newPassword);\n  };\n\n  return (\n    <Grid container direction=\"column\" spacing={2}>\n      <Grid item>\n        <Typography variant=\"h4\">\n          <b>Security</b>\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Typography className={classes.sectionTitle} variant=\"h6\">\n          <b>Change your password</b>\n        </Typography>\n        <Grid\n          container\n          direction=\"row\"\n          justify=\"flex-start\"\n          alignItems=\"center\"\n          spacing={2}\n        >\n          <Grid item>\n            <PasswordField\n              color=\"secondary\"\n              variant=\"outlined\"\n              size=\"small\"\n              label=\"Old password\"\n              value={oldPassword}\n              onChange={(event) => setOldPassword(event.target.value)}\n              error={changePasswordError}\n            />\n          </Grid>\n          <Grid item>\n            <PasswordField\n              color=\"secondary\"\n              variant=\"outlined\"\n              size=\"small\"\n              label=\"New password\"\n              value={newPassword}\n              onChange={(event) => setNewPassword(event.target.value)}\n              error={changePasswordError}\n            />\n          </Grid>\n          <Grid item>\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              disableElevation={true}\n              startIcon={<LockIcon />}\n              disabled={isChangingPassword}\n              onClick={change}\n            >\n              Change Password\n            </Button>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { CircularProgress, Divider, Grid, makeStyles } from '@material-ui/core';\nimport { useHistory } from 'react-router-dom';\nimport ProfileHeader from 'components/profile/ProfileHeader';\nimport ProfileInformation from 'components/profile/ProfileInformation';\nimport { useAxios } from 'hooks/axios';\nimport { getProfileDetails } from 'api/profile';\nimport { PROFILE_ROUTE, renderRoute, toRoute } from 'routing/helpers';\nimport { getFromObject } from 'utils/functions';\nimport CompleteProfileBanner from 'components/profile/CompleteProfileBanner';\nimport { pageFrame } from 'theming';\nimport ProfileSecurity from 'components/profile/ProfileSecurity';\n\nconst profileFields = [\n  {\n    displayName: 'Username',\n    name: 'username',\n    showInHeader: true,\n  },\n  {\n    displayName: 'Name',\n    name: 'name',\n    showInHeader: true,\n    showInEditDialog: true,\n    space: 6,\n  },\n  {\n    displayName: 'Surname',\n    name: 'surname',\n    showInHeader: true,\n    showInEditDialog: true,\n    space: 6,\n  },\n  {\n    displayName: 'Picture',\n    name: 'profilePicture',\n    showInHeader: true,\n    space: 12,\n  },\n  {\n    displayName: 'Email',\n    name: 'email',\n    showInEditDialog: true,\n    space: 12,\n    isRequired: true,\n  },\n  {\n    displayName: 'Phone Number',\n    name: 'contactInformation.phoneNumber',\n    showInEditDialog: true,\n    space: 12,\n  },\n  {\n    displayName: 'Telegram',\n    name: 'contactInformation.telegramUsername',\n    showInEditDialog: true,\n    space: 12,\n  },\n  {\n    displayName: 'Facebook',\n    name: 'contactInformation.facebookUsername',\n    showInEditDialog: true,\n    space: 12,\n  },\n];\n\nconst useStyles = makeStyles((theme) => ({\n  ...pageFrame(theme),\n}));\n\nconst computeMissingFields = (zippedData) => {\n  const validFields = zippedData\n    .filter((field) => field.data)\n    .reduce((acc, _) => acc + 1, 0);\n\n  return parseInt((validFields / zippedData.length) * 100, 10);\n};\n\nexport default function Profile({ routes }) {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const [\n    fGetProfileDetails,\n    cGetProfileDetails,\n    profileDetails,\n    ,\n    isLoadingProfileDetails,\n  ] = useAxios(getProfileDetails);\n\n  const [editProfileRoute, editProfilePictureRoute] = routes;\n\n  useEffect(() => {\n    fGetProfileDetails();\n    return () => cGetProfileDetails();\n  }, []);\n\n  const [zippedData, setZippedData] = useState(profileFields);\n  useEffect(() => {\n    setZippedData(\n      zippedData.map((field) => ({\n        ...field,\n        data: getFromObject(profileDetails, field.name),\n      }))\n    );\n  }, [setZippedData, profileDetails]);\n\n  const [completePercentage, setCompletePercentage] = useState(100);\n  useEffect(() => {\n    setCompletePercentage(computeMissingFields(zippedData));\n  }, [zippedData]);\n\n  const backToProfile = (refresh) => {\n    history.replace(toRoute(PROFILE_ROUTE));\n    if (refresh) {\n      cGetProfileDetails();\n      fGetProfileDetails();\n    }\n  };\n\n  return (\n    <>\n      {editProfileRoute &&\n        renderRoute(editProfileRoute, {\n          backToProfile,\n          isDataLoaded: !!profileDetails,\n          fields: zippedData.filter((field) => field.showInEditDialog),\n        })}\n      {editProfilePictureRoute &&\n        renderRoute(editProfilePictureRoute, {\n          backToProfile,\n          isDataLoaded: !!profileDetails,\n          profilePicture: profileDetails?.profilePicture,\n        })}\n      <Grid\n        className={classes.pageFrame}\n        container\n        direction=\"column\"\n        spacing={4}\n      >\n        {isLoadingProfileDetails && (\n          <Grid item>\n            <CircularProgress />\n          </Grid>\n        )}\n        {!isLoadingProfileDetails && profileDetails && (\n          <>\n            {completePercentage < 100 && (\n              <Grid item>\n                <CompleteProfileBanner progress={completePercentage} />\n              </Grid>\n            )}\n            <Grid item>\n              <ProfileHeader\n                fields={zippedData.filter((field) => field.showInHeader)}\n              />\n            </Grid>\n            <Grid item>\n              <ProfileInformation\n                fields={zippedData.filter((field) => !field.showInHeader)}\n              />\n            </Grid>\n            <Grid item>\n              <Divider />\n            </Grid>\n            <Grid item>\n              <ProfileSecurity />\n            </Grid>\n          </>\n        )}\n      </Grid>\n    </>\n  );\n}\n","import React from 'react';\nimport { Grid, makeStyles } from '@material-ui/core';\nimport VerticalRectangular from 'components/VerticalRectangular';\n\nconst useStyles = makeStyles((theme) => ({\n  bookCover: {\n    [theme.breakpoints.up('xs')]: {\n      width: '100px',\n      height: '150px',\n    },\n    [theme.breakpoints.up('sm')]: {\n      width: '133px',\n      height: '200px',\n    },\n    boxShadow: `1px 1px 5px 1px ${theme.palette.custom.shadowGray}`,\n  },\n}));\n\nexport default function BookImages({ book }) {\n  const classes = useStyles();\n\n  return (\n    <Grid container spacing={2}>\n      {book?.pictures?.map((picture, index) => (\n        <Grid key={index} item>\n          <VerticalRectangular className={classes.bookCover}>\n            <img src={picture} alt={`book cover ${index} of ${book.title}`} />\n          </VerticalRectangular>\n        </Grid>\n      ))}\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  bookTitle: {\n    fontWeight: 'bold',\n  },\n}));\n\nexport default function BookDetails({ book }) {\n  const classes = useStyles();\n\n  return (\n    <Grid container spacing={3}>\n      <Grid item xs={12}>\n        <Grid container spacing={1}>\n          <Grid item xs={12}>\n            <Typography className={classes.bookTitle} variant=\"h4\">\n              {book.title}\n            </Typography>\n          </Grid>\n          <Grid item xs={12}>\n            <Typography className={classes.bookTitle} variant=\"h6\">\n              {book.currency} {book.amount}\n            </Typography>\n          </Grid>\n          <Grid item xs={12}>\n            <Typography variant=\"body1\">{book.isbn}</Typography>\n          </Grid>\n          <Grid item xs={12}>\n            <Typography variant=\"subtitle2\">\n              This book is in <b>{book.condition}</b> condition\n            </Typography>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant=\"body1\">{book.description}</Typography>\n      </Grid>\n    </Grid>\n  );\n}\n","import React, { useEffect } from 'react';\nimport {\n  Avatar,\n  Button,\n  CircularProgress,\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EmailIcon from '@material-ui/icons/Email';\nimport PhoneIcon from '@material-ui/icons/Phone';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport TelegramIcon from '@material-ui/icons/Telegram';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport { useAxios } from '../../../hooks/axios';\nimport { getProfileDetailsById } from '../../../api/profile';\nimport { getFromObject } from '../../../utils/functions';\n\nconst contactInformation = [\n  {\n    displayName: 'Email',\n    name: 'email',\n    style: 'emailButton',\n    icon: <EmailIcon />,\n    onClick: (email) => window.open(`mailto:${email}`, '_blank'),\n  },\n  {\n    displayName: 'Phone Number',\n    name: 'contactInformation.phoneNumber',\n    style: 'phoneButton',\n    icon: <PhoneIcon />,\n    onClick: (phone) => window.open(`tel:${phone}`, '_blank'),\n  },\n  {\n    displayName: 'Telegram',\n    name: 'contactInformation.telegramUsername',\n    style: 'telegramButton',\n    icon: <TelegramIcon />,\n    onClick: (username) => window.open(`https://t.me/${username}`, '_blank'),\n  },\n  {\n    displayName: 'Facebook',\n    name: 'contactInformation.facebookUsername',\n    style: 'facebookButton',\n    icon: <FacebookIcon />,\n    onClick: (username) =>\n      window.open(`https://www.facebook.com/${username}`, '_blank'),\n  },\n];\n\nconst customButton = (color, textColor = color) => ({\n  backgroundColor: fade(color, 0.2),\n  '&:hover': {\n    backgroundColor: fade(color, 0.5),\n  },\n  color: textColor,\n});\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    color: theme.palette.primary.dark,\n    backgroundColor: theme.palette.primary.main,\n  },\n  emailButton: customButton(theme.palette.error.main),\n  phoneButton: customButton(theme.palette.success.main),\n  telegramButton: customButton(theme.palette.custom.telegram),\n  facebookButton: customButton(theme.palette.custom.facebook),\n}));\n\nexport default function BookSellerDetails({ book }) {\n  const classes = useStyles();\n\n  const [\n    fGetProfileDetailsById,\n    cGetProfileDetailsById,\n    seller,\n    ,\n    isLoadingUser,\n  ] = useAxios(getProfileDetailsById);\n\n  useEffect(() => {\n    fGetProfileDetailsById(book.seller);\n    return () => cGetProfileDetailsById();\n  }, []);\n\n  return (\n    <Grid container direction=\"column\" spacing={3}>\n      {isLoadingUser && (\n        <Grid item>\n          <CircularProgress />\n        </Grid>\n      )}\n      {!isLoadingUser && seller && (\n        <>\n          <Grid item>\n            <Grid container alignItems=\"center\" spacing={2}>\n              <Grid item>\n                <Avatar\n                  className={classes.avatar}\n                  src={seller.profilePicture}\n                />\n              </Grid>\n              <Grid item>\n                <Typography variant=\"h6\">Sold by {seller.username}</Typography>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item>\n            <ContactInformation seller={seller} />\n          </Grid>\n        </>\n      )}\n    </Grid>\n  );\n}\n\nfunction ContactInformation({ seller }) {\n  const classes = useStyles();\n\n  return (\n    <Grid container spacing={2}>\n      {contactInformation\n        .filter((contactInfo) => getFromObject(seller, contactInfo.name))\n        .map((contactInfo, index) => (\n          <Grid key={index} item xs={12} sm={4}>\n            <Button\n              className={classes[contactInfo.style]}\n              variant=\"contained\"\n              color=\"primary\"\n              disableElevation={true}\n              fullWidth={true}\n              startIcon={contactInfo.icon}\n              onClick={() =>\n                contactInfo.onClick(getFromObject(seller, contactInfo.name))\n              }\n            >\n              {getFromObject(seller, contactInfo.name)}\n            </Button>\n          </Grid>\n        ))}\n    </Grid>\n  );\n}\n","import AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Slide, useScrollTrigger } from '@material-ui/core';\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { useAuth } from 'hooks/auth';\nimport { useHistory } from 'react-router-dom';\nimport { ExitToAppRounded } from '@material-ui/icons';\n\nconst useStyles = makeStyles(() => ({\n  appBarBottomNavigation: {\n    width: '100%',\n  },\n  appBarDrawer: (props) => ({\n    width: `calc(100% - ${props.drawerWidth}px)`,\n    marginLeft: props.drawerWidth,\n  }),\n}));\n\nexport default function DynamicAppBar({\n  title,\n  variant,\n  drawerWidth,\n  showBack,\n}) {\n  const classes = useStyles({ drawerWidth });\n  const scrollTriggerHide = useScrollTrigger({\n    threshold: 200,\n    disableHysteresis: true,\n  });\n  const scrollTriggerShadow = useScrollTrigger({\n    threshold: 0,\n    disableHysteresis: true,\n  });\n  const history = useHistory();\n  const auth = useAuth();\n\n  const goBack = () => {\n    history.goBack();\n  };\n\n  const logout = () => {\n    auth.logout();\n  };\n\n  return (\n    <Slide appear={false} direction=\"down\" in={!scrollTriggerHide}>\n      <AppBar\n        position=\"fixed\"\n        className={\n          variant === 'drawer'\n            ? classes.appBarDrawer\n            : classes.appBarBottomNavigation\n        }\n        elevation={scrollTriggerShadow ? 4 : 0}\n      >\n        <Toolbar>\n          <Grid\n            container\n            direction=\"row\"\n            justify=\"space-between\"\n            alignItems=\"center\"\n            spacing={2}\n          >\n            <Grid item>\n              <Grid container alignItems=\"center\" spacing={2}>\n                {showBack && (\n                  <Grid item>\n                    <IconButton\n                      aria-label=\"go back\"\n                      color=\"inherit\"\n                      onClick={goBack}\n                    >\n                      <ArrowBackIcon />\n                    </IconButton>\n                  </Grid>\n                )}\n                <Grid item>\n                  <Typography variant=\"h6\" noWrap>\n                    {title}\n                  </Typography>\n                </Grid>\n              </Grid>\n            </Grid>\n\n            <Grid item>\n              <IconButton aria-label=\"logout\" color=\"inherit\" onClick={logout}>\n                <ExitToAppRounded />\n              </IconButton>\n            </Grid>\n          </Grid>\n        </Toolbar>\n      </AppBar>\n    </Slide>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  toolbarPlaceholder: theme.mixins.toolbar,\n  contentContainer: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.default,\n  },\n  content: {\n    padding: theme.spacing(3),\n  },\n}));\n\nexport default function ContentWithToolbar({ hasBottomNavigation, children }) {\n  const classes = useStyles();\n\n  return (\n    <div\n      className={classes.contentContainer}\n      style={hasBottomNavigation ? { paddingBottom: 48 } : {}}\n    >\n      <div className={classes.toolbarPlaceholder} />\n      <main className={classes.content}>{children}</main>\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { CircularProgress, Divider, Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport BookImages from '../../components/book/BookImages';\nimport BookDetails from '../../components/book/BookDetails';\nimport BookSellerDetails from '../../components/book/BookSellerDetails';\nimport { pageFrame } from '../../theming';\nimport { useAxios } from '../../hooks/axios';\nimport { getBookById } from '../../api/books';\nimport DynamicAppBar from '../../components/DynamicAppBar';\nimport ContentWithToolbar from '../../components/ContentWithToolbar';\n\nconst useStyles = makeStyles((theme) => ({\n  ...pageFrame(theme),\n}));\n\nexport default function Book() {\n  const classes = useStyles();\n\n  const { id } = useParams();\n\n  const [fGetBookById, cGetBookById, book, , isLoadingBook] = useAxios(\n    getBookById\n  );\n\n  useEffect(() => {\n    fGetBookById(id);\n    return () => cGetBookById();\n  }, []);\n\n  return (\n    <Grid container>\n      <DynamicAppBar title={book?.title ?? 'Book'} showBack={true} />\n\n      <ContentWithToolbar>\n        {isLoadingBook && (\n          <Grid\n            style={{ height: '100vh' }}\n            container\n            alignItems=\"center\"\n            justify=\"center\"\n          >\n            <Grid item>\n              <CircularProgress />\n            </Grid>\n          </Grid>\n        )}\n        {!isLoadingBook && book && (\n          <Grid className={classes.pageFrame} container spacing={4}>\n            <Grid item xs={12}>\n              <BookImages book={book} />\n            </Grid>\n            <Grid item xs={12}>\n              <BookDetails book={book} />\n            </Grid>\n            <Grid item xs={12}>\n              <Divider />\n            </Grid>\n            <Grid item xs={12}>\n              <BookSellerDetails book={book} />\n            </Grid>\n          </Grid>\n        )}\n      </ContentWithToolbar>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItem from '@material-ui/core/ListItem';\nimport DynamicAppBar from 'components/DynamicAppBar';\nimport ContentWithToolbar from 'components/ContentWithToolbar';\nimport CloudImage from 'components/CloudImage';\nimport clsx from 'clsx';\nimport Grid from '@material-ui/core/Grid';\n\nconst drawerWidth = 180;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  toolbarPlaceholder: theme.mixins.toolbarDrawer,\n  logo: { height: '100%' },\n  selectedSection: {\n    color: theme.palette.secondary.main,\n  },\n}));\n\nexport default function DrawerLeft({\n  title,\n  content,\n  selectedSection,\n  sections,\n  changeSection,\n}) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <DynamicAppBar title={title} variant=\"drawer\" drawerWidth={drawerWidth} />\n      <Drawer\n        className={classes.drawer}\n        variant=\"permanent\"\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n        anchor=\"left\"\n      >\n        <div className={clsx(classes.toolbarPlaceholder)}>\n          <Grid\n            container\n            justify=\"flex-start\"\n            alignItems=\"center\"\n            style={{ height: '100%', marginLeft: '6px' }}\n          >\n            <Grid item style={{ height: '90%' }}>\n              <CloudImage\n                className={classes.logo}\n                alt=\"logo extended\"\n                url=\"https://res.cloudinary.com/dlfbz4vzv/image/upload/v1618163769/Books/logo_extended_tzumtl.\"\n              />\n            </Grid>\n          </Grid>\n        </div>\n        <Divider />\n        <List>\n          {sections.map((section) => (\n            <ListItem\n              button\n              className={section === selectedSection && classes.selectedSection}\n              key={section.label}\n              selected={section === selectedSection}\n              onClick={() => changeSection(section.route)}\n            >\n              <ListItemIcon\n                className={\n                  section === selectedSection && classes.selectedSection\n                }\n              >\n                {section.icon}\n              </ListItemIcon>\n              <ListItemText primary={section.label} />\n            </ListItem>\n          ))}\n        </List>\n      </Drawer>\n      <ContentWithToolbar>{content}</ContentWithToolbar>\n    </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles, MuiThemeProvider } from '@material-ui/core/styles';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport DynamicAppBar from 'components/DynamicAppBar';\nimport ContentWithToolbar from 'components/ContentWithToolbar';\nimport { createMuiTheme } from '@material-ui/core';\nimport theme from 'theming';\n\nconst navTheme = createMuiTheme({\n  palette: {\n    primary: {\n      main: theme.palette.secondary.main,\n    },\n  },\n});\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    width: '100%',\n  },\n  navigator: {\n    background: theme.palette.background.paper,\n    /*\n    We use viewport width instead of page width, because the page includes\n    the scroll bar, which is not always visible.\n    We don't want this width to change when the scrollbar appears.\n     */\n    width: '100vw',\n    position: 'fixed',\n    bottom: 0,\n    borderWidth: 1,\n    borderColor: theme.palette.divider,\n    borderStyle: 'solid',\n    zIndex: 1,\n    // offset-x | offset-y | blur-radius | spread-radius\n    boxShadow: `0px 0px 5px 2px ${theme.palette.primary}`,\n    // Necessary for content to be above navigator\n    ...theme.mixins.navigator,\n  },\n}));\n\nexport default function SimpleBottomNavigation({\n  title,\n  content,\n  selectedIndex,\n  sections,\n  changeSection,\n}) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <DynamicAppBar title={title} variant=\"bottomNavigation\" />\n      <ContentWithToolbar hasBottomNavigation={true}>\n        {content}\n      </ContentWithToolbar>\n      <MuiThemeProvider theme={navTheme}>\n        <BottomNavigation\n          className={classes.navigator}\n          value={selectedIndex}\n          onChange={(event, newIndex) =>\n            changeSection(sections[newIndex].route)\n          }\n        >\n          {sections.map((section) => (\n            <BottomNavigationAction\n              key={section.label}\n              label={section.label}\n              icon={section.icon}\n            />\n          ))}\n        </BottomNavigation>\n      </MuiThemeProvider>\n    </div>\n  );\n}\n","import React, { useMemo } from 'react';\nimport DrawerLeft from 'components/DrawerLeft';\nimport { EXPLORE_ROUTE, PROFILE_ROUTE, SELL_ROUTE } from 'routing/helpers';\nimport { useMediaQuery } from '@material-ui/core';\nimport SimpleBottomNavigation from 'components/SimpleBottomNavigation';\nimport routeIsAncestor from 'utils/routing';\nimport {\n  AccountCircleRounded,\n  LocalLibraryRounded,\n  MonetizationOnRounded,\n} from '@material-ui/icons';\n\nconst sections = [\n  {\n    route: EXPLORE_ROUTE,\n    label: 'Explore',\n    icon: <LocalLibraryRounded />,\n  },\n  {\n    route: SELL_ROUTE,\n    label: 'Sell',\n    icon: <MonetizationOnRounded />,\n  },\n  {\n    route: PROFILE_ROUTE,\n    label: 'Profile',\n    icon: <AccountCircleRounded />,\n  },\n];\n\nexport default function Navigation({ children, selectedRoute, changeSection }) {\n  const [selectedSection, selectedIndex] = useMemo(() => {\n    const index = sections.findIndex((section) =>\n      routeIsAncestor(section.route, selectedRoute)\n    );\n    return [sections[index], index];\n  }, [selectedRoute]);\n  const downSmallMedium = useMediaQuery((theme) =>\n    theme.breakpoints.down(theme.breakpoints.values.smmd)\n  );\n\n  return (\n    <div style={{ width: '100%' }}>\n      {downSmallMedium ? (\n        <SimpleBottomNavigation\n          title=\"Books\"\n          content={children}\n          selectedSection={selectedSection}\n          selectedIndex={selectedIndex}\n          sections={sections}\n          changeSection={changeSection}\n        />\n      ) : (\n        <DrawerLeft\n          title={selectedSection?.label}\n          content={children}\n          selectedSection={selectedSection}\n          selectedIndex={selectedIndex}\n          sections={sections}\n          changeSection={changeSection}\n        />\n      )}\n    </div>\n  );\n}\n","// Returns true iff the first route is an ancestor of the second route.\nexport default function routeIsAncestor(ancestor, route) {\n  return route.startsWith(ancestor);\n}\n","const AuthProgress = {\n  IDENTITY: 0,\n  LOGIN: 1,\n  SIGNUP: 2,\n};\nexport default AuthProgress;\n","import Grid from '@material-ui/core/Grid';\nimport CloudImage from 'components/CloudImage';\nimport { Typography } from '@material-ui/core';\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AuthProgress from 'screens/Authorization/authProgress';\n\nconst useStyles = makeStyles(() => ({\n  logo: {\n    minWidth: '125px',\n    width: 'auto',\n    height: '80px',\n  },\n}));\n\nfunction renderText(progress) {\n  switch (progress) {\n    case AuthProgress.LOGIN:\n      return `Nice to see you again!`;\n    case AuthProgress.SIGNUP:\n      return `This is going to be great!`;\n    default:\n      return `We will log you in or create an account if you don't have one already.`;\n  }\n}\n\nexport default function LoginHeader({ progress }) {\n  const classes = useStyles();\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"stretch\"\n      spacing={2}\n    >\n      <Grid item>\n        <CloudImage\n          className={classes.logo}\n          alt=\"logo extended\"\n          url=\"https://res.cloudinary.com/dlfbz4vzv/image/upload/v1618163769/Books/logo_extended_tzumtl.\"\n        />\n      </Grid>\n      <Grid item>\n        <Typography variant=\"body2\">{renderText(progress)}</Typography>\n      </Grid>\n    </Grid>\n  );\n}\n","import React, { useRef, useState } from 'react';\nimport { Button, TextField } from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { checkIdentity } from 'api/auth';\nimport { useAxios } from 'hooks/axios';\nimport AuthProgress from 'screens/Authorization/authProgress';\n\nconst useStyles = makeStyles(() => ({\n  textField: { width: '100%' },\n  btn: { width: '100%' },\n}));\n\nexport default function IdentityForm({\n  onProgress,\n  usernameOrEmail,\n  setUsernameOrEmail,\n}) {\n  const classes = useStyles();\n  const [invalid, setInvalid] = useState(false);\n  const btnContinue = useRef(null);\n  const [doCheckIdentity, cancelCheckIdentity] = useAxios(\n    checkIdentity,\n    'verifying existence of user',\n    (fetchedData) => {\n      if (fetchedData.username) {\n        onProgress(AuthProgress.LOGIN);\n      } else {\n        onProgress(AuthProgress.SIGNUP);\n      }\n    },\n    () => setInvalid(true)\n  );\n\n  const handleSubmit = () => {\n    cancelCheckIdentity();\n    doCheckIdentity(usernameOrEmail);\n  };\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"stretch\"\n      spacing={2}\n      onKeyPress={(e) => {\n        if (e.key === 'Enter') btnContinue.current.click();\n      }}\n    >\n      <Grid item>\n        <TextField\n          username=\"true\"\n          color=\"secondary\"\n          className={classes.textField}\n          autoFocus={true}\n          size=\"small\"\n          label=\"Username or email\"\n          variant=\"outlined\"\n          onChange={(event) => {\n            setInvalid(false);\n            setUsernameOrEmail(event.target.value);\n          }}\n          error={invalid}\n        />\n      </Grid>\n      <Grid item>\n        <Button\n          className={classes.btn}\n          variant=\"contained\"\n          color=\"primary\"\n          ref={btnContinue}\n          disableElevation={true}\n          onClick={handleSubmit}\n        >\n          Continue\n        </Button>\n      </Grid>\n    </Grid>\n  );\n}\n","import { Button, TextField } from '@material-ui/core';\nimport React, { useRef, useState } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport { signup } from 'api/auth';\nimport PasswordField from 'components/PasswordField';\nimport { useAxios } from 'hooks/axios';\nimport { useSnackbar } from 'notistack';\nimport StdMessages from '../../../messages/standard';\n\nfunction exactMatch(text, regex) {\n  const matches = text.match(regex);\n  return matches && matches.length ? matches[0].length === text.length : false;\n}\n\nexport default function SignupForm({ redirect, usernameOrEmail }) {\n  const { enqueueSnackbar } = useSnackbar();\n  const [invalid, setInvalid] = useState(false);\n  const btnContinue = useRef(null);\n\n  const isEmail = exactMatch(\n    usernameOrEmail,\n    /[^@ \\t\\r\\n]+@[^@ \\t\\r\\n]+\\.[^@ \\t\\r\\n]+/g\n  );\n  const initEmail = isEmail ? usernameOrEmail : '';\n  const isUsername = !isEmail && exactMatch(usernameOrEmail, /\\w+/g);\n  const initUsername = isUsername ? usernameOrEmail : '';\n  const [newUser, setNewUser] = useState({\n    email: initEmail,\n    username: initUsername,\n    password: '',\n    passwordConfirmed: '',\n  });\n  const updateNewUser = (fieldName) => (event) => {\n    setInvalid(false);\n    setNewUser({\n      ...newUser,\n      [fieldName]: event.target.value,\n    });\n  };\n  const passwordConfirmed = newUser.password === newUser.passwordConfirmed;\n\n  const [doSignup, cancelSignup] = useAxios(\n    signup,\n    'signing up',\n    () => {\n      enqueueSnackbar(StdMessages.SIGNUP_DONE(), {\n        variant: 'success',\n      });\n      redirect();\n    },\n    (error) => {\n      if (error?.response?.status === 512) {\n        enqueueSnackbar(error.response.data?.detail, {\n          variant: 'error',\n        });\n      }\n      setInvalid(true);\n    }\n  );\n\n  const handleSubmit = () => {\n    if (passwordConfirmed) {\n      cancelSignup();\n      doSignup(newUser);\n    }\n  };\n\n  return (\n    <form>\n      <Grid\n        container\n        direction=\"column\"\n        justify=\"flex-start\"\n        alignItems=\"stretch\"\n        spacing={2}\n        onKeyPress={(e) => {\n          if (e.key === 'Enter') btnContinue.current.click();\n        }}\n      >\n        <Grid item>\n          <TextField\n            email=\"true\"\n            color=\"secondary\"\n            fullWidth\n            autoFocus={true}\n            defaultValue={initEmail}\n            id=\"email\"\n            variant=\"outlined\"\n            size=\"small\"\n            label=\"Email\"\n            error={invalid}\n            onChange={updateNewUser('email')}\n          />\n        </Grid>\n        <Grid item>\n          <TextField\n            username=\"true\"\n            color=\"secondary\"\n            fullWidth\n            defaultValue={initUsername}\n            id=\"username\"\n            variant=\"outlined\"\n            size=\"small\"\n            label=\"Username\"\n            helperText=\"At least 3 characters long\"\n            error={invalid}\n            onChange={updateNewUser('username')}\n          />\n        </Grid>\n        <Grid item>\n          <PasswordField\n            color=\"secondary\"\n            fullWidth\n            id=\"password\"\n            variant=\"outlined\"\n            size=\"small\"\n            label=\"Password\"\n            helperText=\"At least 7 characters long\"\n            value={newUser.password}\n            error={invalid}\n            onChange={updateNewUser('password')}\n          />\n        </Grid>\n        <Grid item>\n          <PasswordField\n            color=\"secondary\"\n            fullWidth\n            id=\"passwordConfirmed\"\n            variant=\"outlined\"\n            size=\"small\"\n            label=\"Confirm password\"\n            value={newUser.passwordConfirmed}\n            error={!passwordConfirmed}\n            helperText={passwordConfirmed ? '' : 'Passwords do not match.'}\n            onChange={updateNewUser('passwordConfirmed')}\n          />\n        </Grid>\n        <Grid item>\n          <Button\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            ref={btnContinue}\n            disableElevation={true}\n            onClick={handleSubmit}\n          >\n            Continue\n          </Button>\n        </Grid>\n      </Grid>\n    </form>\n  );\n}\n","import React, { useRef, useState } from 'react';\nimport { Button } from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { login } from 'api/auth';\nimport PasswordField from 'components/PasswordField';\nimport { useAxios } from 'hooks/axios';\nimport { useAuth } from 'hooks/auth';\n\nconst useStyles = makeStyles(() => ({\n  textField: { width: '100%' },\n  btn: { width: '100%' },\n}));\n\nexport default function LoginForm({ redirect, usernameOrEmail }) {\n  const classes = useStyles();\n  const [password, setPassword] = useState('');\n  const [invalid, setInvalid] = useState(false);\n  const auth = useAuth();\n  const btnContinue = useRef(null);\n\n  const [fetch, , , , isLoading] = useAxios(\n    login,\n    'logging in',\n    (fetchedData) => {\n      auth.login(fetchedData.token);\n      redirect();\n    },\n    () => setInvalid(true)\n  );\n\n  const updatePassword = (event) => {\n    setInvalid(false);\n    setPassword(event.target.value);\n  };\n\n  const handleSubmit = () => fetch(usernameOrEmail, password);\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"stretch\"\n      spacing={2}\n      onKeyPress={(e) => {\n        if (e.key === 'Enter') btnContinue.current.click();\n      }}\n    >\n      <Grid item>\n        <PasswordField\n          color=\"secondary\"\n          current-password=\"true\"\n          className={classes.textField}\n          autoFocus={true}\n          variant=\"outlined\"\n          size=\"small\"\n          label=\"Password\"\n          onChange={updatePassword}\n          error={invalid}\n        />\n      </Grid>\n      <Grid item>\n        <Button\n          className={classes.btn}\n          variant=\"contained\"\n          color=\"primary\"\n          ref={btnContinue}\n          onClick={handleSubmit}\n          disableElevation={true}\n          disabled={isLoading}\n        >\n          Continue\n        </Button>\n      </Grid>\n    </Grid>\n  );\n}\n","import React, { useState } from 'react';\nimport AuthProgress from 'screens/Authorization/authProgress';\nimport IdentityForm from 'components/login/IdentityForm';\nimport SignupForm from 'components/login/SignupForm';\nimport LoginForm from 'components/login/LoginForm';\n\nexport default function AuthForm({ progress, ...remProps }) {\n  const [usernameOrEmail, setUsernameOrEmail] = useState('');\n\n  switch (progress) {\n    case AuthProgress.IDENTITY:\n      return (\n        <IdentityForm\n          usernameOrEmail={usernameOrEmail}\n          setUsernameOrEmail={setUsernameOrEmail}\n          {...remProps}\n        />\n      );\n    case AuthProgress.SIGNUP:\n      return <SignupForm usernameOrEmail={usernameOrEmail} {...remProps} />;\n    case AuthProgress.LOGIN:\n      return <LoginForm usernameOrEmail={usernameOrEmail} {...remProps} />;\n    default:\n      return <></>;\n  }\n}\n","import React, { useState } from 'react';\nimport { Paper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport LoginHeader from 'components/login/LoginHeader';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport AuthForm from 'components/login/AuthForm';\nimport COMPILATION_PROGRESS from './authProgress';\nimport { EXPLORE_ROUTE } from '../../routing/helpers';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    minHeight: '100vh',\n    textAlign: 'center',\n  },\n  loginCard: {\n    [theme.breakpoints.up('xs')]: {\n      borderRadius: 0,\n      padding: '50px 5%',\n      width: '100vw',\n      height: '100vh',\n    },\n    [theme.breakpoints.up('smmd')]: {\n      borderRadius: 20,\n      width: '800px',\n      height: '690px',\n    },\n    [theme.breakpoints.up('sm')]: {\n      padding: '50px 25%',\n    },\n  },\n  contentContainer: {\n    margin: 'auto',\n    width: '100%',\n    height: '100%',\n    minWidth: '280px',\n  },\n}));\n\nexport default function Authorization() {\n  const classes = useStyles();\n  const location = useLocation();\n  const history = useHistory();\n  const [progress, setProgress] = useState(COMPILATION_PROGRESS.IDENTITY);\n\n  const redirect = () => {\n    // If the user has been redirected to the auth page from another page,\n    // go back there\n    if (location.state?.from) {\n      history.replace(location.state.from);\n    } else {\n      history.push(EXPLORE_ROUTE);\n    }\n  };\n\n  return (\n    <Grid\n      container\n      className={classes.root}\n      direction=\"column\"\n      justify=\"center\"\n      alignItems=\"center\"\n    >\n      <Grid item>\n        <Paper className={classes.loginCard} variant=\"outlined\">\n          <Grid\n            container\n            className={classes.contentContainer}\n            direction=\"column\"\n            justify=\"center\"\n            alignItems=\"stretch\"\n            spacing={8}\n          >\n            <Grid item>\n              <LoginHeader progress={progress} />\n            </Grid>\n            <Grid item>\n              <Grid\n                container\n                direction=\"column\"\n                justify=\"flex-start\"\n                alignItems=\"stretch\"\n                spacing={2}\n              >\n                <Grid item>\n                  <AuthForm\n                    progress={progress}\n                    onProgress={setProgress}\n                    redirect={redirect}\n                  />\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Paper>\n      </Grid>\n    </Grid>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useStatelessAxios } from 'hooks/axios';\nimport Grid from '@material-ui/core/Grid';\nimport AddPhotoIcon from '@material-ui/icons/AddPhotoAlternateOutlined';\nimport {\n  CircularProgress,\n  GridList,\n  GridListTile,\n  useTheme,\n} from '@material-ui/core';\nimport clsx from 'clsx';\nimport { axiosState, uploadProgress } from 'utils/constants';\nimport CloudImage from 'components/CloudImage';\nimport ConfirmationDialog from 'components/ConfirmationDialog';\n\nconst useStyles = makeStyles((theme) => ({\n  iconContainer: {\n    height: '100%',\n    padding: '10px',\n  },\n  icon: {\n    color: theme.palette.divider,\n    height: '50px',\n    width: '50px',\n  },\n  root: {\n    padding: theme.spacing(1),\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-around',\n    overflow: 'hidden',\n  },\n  gridList: {\n    width: '100%',\n  },\n  imgContainer: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    height: '100%',\n    width: '100%',\n  },\n  img: {\n    height: '100%',\n    width: 'auto',\n    objectFit: 'scale-down',\n  },\n  imgLoading: {\n    opacity: 0.5,\n  },\n}));\n\nexport default function ImageUploader({\n  droppedImages,\n  onUploadStateChange,\n  uploadEndpoint,\n  cols,\n  preferDownload,\n}) {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  const [uploadImage, cancelAllUploads] = useStatelessAxios(uploadEndpoint);\n\n  // Cleanup on unmount\n  useEffect(() => cancelAllUploads, []);\n\n  const uploadImageGuarded = (image) => {\n    /*\n    'image.id' that is used for the callback that we pass in 'uploadImage'\n    is bound to the scope of this function.\n    This means that when the callback is used, 'image.id' is always gonna be\n    the same.\n     */\n    uploadImage((state, data) => {\n      onUploadStateChange(image.id, state, data);\n    }, image.file);\n  };\n\n  useEffect(() => {\n    droppedImages\n      .filter((image) => image.status === uploadProgress.waiting)\n      .forEach((image) => uploadImageGuarded(image));\n  }, [droppedImages]);\n\n  return droppedImages.length === 0 ? (\n    <Grid\n      container\n      className={classes.iconContainer}\n      direction=\"column\"\n      justify=\"center\"\n      alignItems=\"center\"\n    >\n      <AddPhotoIcon className={classes.icon} />\n    </Grid>\n  ) : (\n    <div className={classes.root}>\n      <GridList\n        className={classes.gridList}\n        cellHeight={100}\n        cols={cols}\n        spacing={theme.spacing(2)}\n      >\n        {droppedImages.map((image, index) => (\n          <GridListTile key={index} cols={1}>\n            <DroppedImage\n              image={image}\n              remove={() =>\n                onUploadStateChange(image.id, axiosState.abort, {\n                  secureUrl: image.secureUrl,\n                })\n              }\n              preferDownload={preferDownload}\n            />\n          </GridListTile>\n        ))}\n      </GridList>\n    </div>\n  );\n}\n\nfunction altFromStatus(imageStatus) {\n  switch (imageStatus) {\n    case uploadProgress.uploaded:\n      return 'uploaded image';\n    case uploadProgress.uploading:\n      return 'uploading image';\n    case uploadProgress.waiting:\n      return 'image to be uploaded';\n    default:\n      return 'invalid image';\n  }\n}\n\n/*\nIf 'preferDownload' is true and the image is uploaded,\nthe image is downloaded instead of using the local file.\n */\nfunction DroppedImage({ image, remove, preferDownload }) {\n  const classes = useStyles();\n  const [downloaded, setDownloaded] = useState(false);\n  const [showRemove, setShowRemove] = useState(false);\n  const handleClick = (event) => {\n    // Do not trigger click event of parent\n    event.stopPropagation();\n    if (image.status === uploadProgress.uploaded) {\n      setShowRemove(true);\n    }\n  };\n\n  const downloadRequired =\n    image.status === uploadProgress.uploaded && (preferDownload || !image.file);\n  const loading =\n    image.status === uploadProgress.uploading ||\n    (downloadRequired && !downloaded);\n\n  return (\n    <div className={classes.imgContainer}>\n      {showRemove && (\n        <ConfirmationDialog\n          title=\"Are you sure you want to remove the image?\"\n          onConfirm={() => {\n            remove();\n            setShowRemove(false);\n          }}\n          onCancel={() => setShowRemove(false)}\n        />\n      )}\n      {loading && (\n        <Grid\n          container\n          style={{ height: '100%', position: 'absolute' }}\n          direction=\"column\"\n          justify=\"center\"\n          alignItems=\"center\"\n        >\n          <CircularProgress\n            variant=\"indeterminate\"\n            disableShrink\n            color=\"secondary\"\n            size={50}\n            thickness={4}\n          />\n        </Grid>\n      )}\n      {\n        // If not downloaded yet, show preview if it is available\n        (!downloadRequired || !downloaded) && image.file && (\n          <img\n            className={clsx(\n              classes.img,\n              image.status !== uploadProgress.uploaded && classes.imgLoading\n            )}\n            alt={altFromStatus(image.status)}\n            src={URL.createObjectURL(image.file)}\n            onClick={handleClick}\n          />\n        )\n      }\n      {downloadRequired && (\n        <CloudImage\n          className={classes.img}\n          url={image.secureUrl}\n          cutExtension={true}\n          /*\n          Warning: This callback can be triggered even if 'downloadRequired' is\n          false and the 'CloudImage' component is not shown.\n           */\n          onLoad={() => setDownloaded(true)}\n          onClick={handleClick}\n          style={{ display: 'flex' }}\n        />\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useReducer, useRef, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSnackbar } from 'notistack';\nimport clsx from 'clsx';\nimport ImageUploader from 'components/ImageUploader';\nimport StdMessages from 'messages/standard';\nimport {\n  axiosState,\n  computeFillingState,\n  fillingState,\n  uploadProgress,\n} from 'utils/constants';\nimport { red } from '@material-ui/core/colors';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  dropzone: {\n    borderRadius: 5,\n    borderWidth: 3,\n    borderStyle: 'dashed',\n    outline: 'none',\n    borderColor: theme.palette.divider,\n    '&:hover': {\n      borderColor: theme.palette.custom.lightGrey,\n    },\n  },\n  dropzoneNotEnough: {\n    borderColor: red[500],\n  },\n  dropzoneNotEnoughHover: {\n    '&:hover': {\n      borderColor: red[200],\n    },\n  },\n  dropzoneNotEnoughDrag: {\n    borderColor: red[200],\n  },\n  dropzoneDrag: {\n    borderColor: theme.palette.custom.lightGrey,\n  },\n  content: {\n    [theme.breakpoints.up('xs')]: {\n      minHeight: '100px',\n    },\n    [theme.breakpoints.up('md')]: {\n      minHeight: '200px',\n    },\n  },\n}));\n\nexport default function ImageDropzone({\n  minImages,\n  maxImages,\n  explanation,\n  pictureUrls,\n  addPictureUrl,\n  removePictureUrl,\n  setBlocked,\n  uploadEndpoint,\n  preferDownload,\n  ...gridListArgs\n}) {\n  const classes = useStyles();\n  const { enqueueSnackbar } = useSnackbar();\n  const [, forceUpdate] = useReducer((x) => x + 1, 0);\n\n  // Initialize dropped images with the given picture urls\n  const droppedImages = useRef(\n    pictureUrls.map((pictureUrl, index) => ({\n      id: index,\n      status: uploadProgress.uploaded,\n      secureUrl: pictureUrl,\n    }))\n  );\n\n  const [filling, setFilling] = useState(\n    computeFillingState(minImages, maxImages, droppedImages.current.length)\n  );\n\n  useEffect(() => {\n    // Update filling\n    const newFilling = computeFillingState(\n      minImages,\n      maxImages,\n      droppedImages.current.length\n    );\n    setFilling(newFilling);\n    /*\n    Block if there are not enough images or\n    there is any image waiting/uploading\n     */\n    setBlocked(\n      newFilling === fillingState.notEnough ||\n        droppedImages.current.some(\n          (img) =>\n            img.status === uploadProgress.waiting ||\n            img.status === uploadProgress.uploading\n        )\n    );\n  }, [droppedImages.current]);\n\n  const rejectFiles = (files, nameExtractor, reason) =>\n    files.forEach((file) =>\n      enqueueSnackbar(`${file} - ${reason}`, {\n        variant: 'error',\n      })\n    );\n\n  // Generates a new unique id for a dropped image according to the given index\n  const newUniqueDroppedImageId = (index) => {\n    if (droppedImages.current.length === 0) return index;\n    return (\n      droppedImages.current[droppedImages.current.length - 1].id + 1 + index\n    );\n  };\n\n  const dropImages = (images) => {\n    const freeSlots = maxImages - droppedImages.current.length;\n    const importingImages = images.slice(0, freeSlots);\n    const overflowedImages = images.slice(freeSlots);\n\n    if (importingImages.length > 0) {\n      droppedImages.current = [\n        ...droppedImages.current,\n        ...importingImages.map((image, index) => ({\n          id: newUniqueDroppedImageId(index),\n          file: image,\n          status: uploadProgress.waiting,\n        })),\n      ];\n    }\n    rejectFiles(\n      overflowedImages,\n      (img) => img.name,\n      StdMessages.MAX_NUMBER_IMAGES()\n    );\n    forceUpdate();\n  };\n\n  const removeDroppedImage = (imageId) => {\n    droppedImages.current = droppedImages.current.filter(\n      (img) => img.id !== imageId\n    );\n    forceUpdate();\n  };\n  const changeDroppedImage = (imageId, newImageProps) => {\n    // Apply changes\n    droppedImages.current = droppedImages.current.map((image) =>\n      image.id === imageId ? { ...image, ...newImageProps } : image\n    );\n    forceUpdate();\n  };\n  const getDroppedImageName = (imageId) => {\n    const matches = droppedImages.current.filter((img) => img.id === imageId);\n    return matches.length === 0 ? undefined : matches[0].file.name;\n  };\n\n  const onUploadStateChange = (imageId, state, data) => {\n    switch (state) {\n      case axiosState.progress:\n        changeDroppedImage(imageId, { status: uploadProgress.uploading });\n        break;\n      case axiosState.success:\n        addPictureUrl(data.secureUrl);\n        changeDroppedImage(imageId, {\n          status: uploadProgress.uploaded,\n          secureUrl: data.secureUrl,\n        });\n        break;\n      case axiosState.abort:\n        removePictureUrl(data.secureUrl);\n        removeDroppedImage(imageId);\n        break;\n      case axiosState.error:\n      default: {\n        const imgName = getDroppedImageName(imageId);\n        removeDroppedImage(imageId);\n        enqueueSnackbar(`${imgName} - ${StdMessages.UNSUPPORTED_FORMAT()}`, {\n          variant: 'error',\n        });\n        break;\n      }\n    }\n    forceUpdate();\n  };\n\n  const onDrop = (acceptedFiles, fileRejections) => {\n    dropImages(acceptedFiles);\n    rejectFiles(\n      fileRejections,\n      (fileRejection) => fileRejection.file.name,\n      StdMessages.INVALID_FORMAT()\n    );\n  };\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: 'image/jpeg, image/jpg, image/png',\n  });\n\n  const dropzoneClasses = () => {\n    if (filling === fillingState.notEnough) {\n      return clsx(\n        classes.dropzone,\n        classes.dropzoneNotEnough,\n        classes.dropzoneNotEnoughHover,\n        isDragActive && classes.dropzoneNotEnoughDrag\n      );\n    }\n    return clsx(classes.dropzone, isDragActive && classes.dropzoneDrag);\n  };\n\n  return (\n    <div className={classes.root}>\n      <div className={dropzoneClasses()} {...getRootProps()}>\n        <input {...getInputProps()} />\n        <ImageUploader\n          className={classes.content}\n          droppedImages={droppedImages.current}\n          onUploadStateChange={onUploadStateChange}\n          uploadEndpoint={uploadEndpoint}\n          preferDownload={preferDownload}\n          {...gridListArgs}\n        />\n      </div>\n      <em style={{ marginTop: '10px' }}>\n        Only *.jpeg, *.jpg and *.png images are accepted.\n      </em>\n      <em>{explanation}</em>\n    </div>\n  );\n}\n","import axios from 'axios';\nimport { BASE_URL, failureWith, successWith, withAuth } from './base';\n\nconst loadCurrencies = (onSuccess, onFailure, cancelToken) => {\n  axios\n    .get(\n      `${BASE_URL}/currencies/all`,\n      withAuth({\n        cancelToken,\n      })\n    )\n    .then(successWith(onSuccess, onFailure, 200))\n    .catch(failureWith(onFailure, 500));\n};\n\nexport default loadCurrencies;\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport { useAxios } from 'hooks/axios';\nimport { editBook, sellBook, uploadBookImage } from 'api/books';\nimport { CircularProgress, useMediaQuery } from '@material-ui/core';\nimport { Autocomplete } from '@material-ui/lab';\nimport ImageDropzone from 'components/ImageDropzone';\nimport { bookConditions } from 'utils/constants';\nimport { useSnackbar } from 'notistack';\nimport StdMessages from 'messages/standard';\nimport loadCurrencies from 'api/currencies';\nimport { themedBorderRadius } from '../../theming';\n\nconst unwrapEventValue = (block) => (event) => {\n  block(event.target.value);\n};\n\nconst evaluateNumColumns = (upSmall, upSmallMedium, upLarge) => {\n  let cols = 1;\n  if (upLarge) cols = 4;\n  else if (upSmallMedium) cols = 3;\n  else if (upSmall) cols = 2;\n  return cols;\n};\n\nexport default function BookEditSellDialog({ backToParent, bookToEdit }) {\n  const downSmall = useMediaQuery((theme) =>\n    theme.breakpoints.down(theme.breakpoints.values.sm)\n  );\n  const upSmall = useMediaQuery((theme) => theme.breakpoints.up('sm'));\n  const upSmallMedium = useMediaQuery((theme) => theme.breakpoints.up('smmd'));\n  const upLarge = useMediaQuery((theme) => theme.breakpoints.up('lg'));\n  const { enqueueSnackbar } = useSnackbar();\n\n  const cols = evaluateNumColumns(upSmall, upSmallMedium, upLarge);\n  const [invalid, setInvalid] = useState(false);\n  const [isBlocked, setBlocked] = useState(false);\n  const [currenciesYetToFetch, setCurrenciesYetToFetch] = useState(true);\n  const [\n    fetchCurrencies,\n    cancelCurrencies,\n    currencies,\n    ,\n    isLoadingCurrencies,\n  ] = useAxios(\n    loadCurrencies,\n    'loading currencies',\n    () => setCurrenciesYetToFetch(false),\n    () => {\n      enqueueSnackbar(StdMessages.CURRENCIES_ERROR(), {\n        variant: 'error',\n      });\n      backToParent(false)();\n    }\n  );\n  // Fetch currencies on mounting and cancel on unmounting\n  useEffect(() => {\n    fetchCurrencies();\n    return cancelCurrencies;\n  }, []);\n  const currencyFromSymbol = (symbol) =>\n    currencies?.filter((currency) => currency.symbol === symbol)[0];\n\n  const defaultCondition = bookToEdit?.condition || bookConditions.ok;\n  // We store all props of the book in a state, expect for the picture urls.\n  // The picture urls are stored in a ref for writing with immediate effect.\n  const [currentBook, setNewBook] = useState({\n    description: bookToEdit?.description,\n    currency: bookToEdit?.currency,\n    amount: bookToEdit?.amount,\n    condition: defaultCondition,\n  });\n  const updateBook = (fieldName) => (value) => {\n    setInvalid(false);\n    const bookGen = {\n      ...currentBook,\n      [fieldName]: value,\n    };\n    setNewBook(bookGen);\n  };\n\n  // We compute the default currency at the beginning and\n  // once 'currencies' has been fetched\n  const defaultCurrencyLabel = useMemo(() => {\n    const newDefaultSymbol =\n      bookToEdit?.currency || (currencies && currencies[0]?.symbol);\n    const newDefaultCurrency = currencyFromSymbol(newDefaultSymbol);\n    updateBook('currency')(newDefaultCurrency?.symbol);\n    return (\n      newDefaultCurrency &&\n      `${newDefaultCurrency.symbol} ${newDefaultCurrency.name}`\n    );\n  }, [currencies]);\n  const pictureUrls = useRef(bookToEdit?.pictures || []);\n\n  const [sell, , , , isLoadingSell] = useAxios(\n    sellBook,\n    'selling book',\n    backToParent(true),\n    () => setInvalid(true)\n  );\n  const [edit, , , , isLoadingEdit] = useAxios(\n    editBook,\n    'editing book',\n    backToParent(true),\n    () => setInvalid(true)\n  );\n  const isLoading = isLoadingSell || isLoadingEdit || isLoadingCurrencies;\n  const handleConfirm = () => {\n    // Merge state and ref\n    const currentBookWithPictures = currentBook;\n    currentBookWithPictures.pictures = pictureUrls.current;\n    if (bookToEdit) {\n      edit(bookToEdit.bookId, currentBookWithPictures);\n    } else {\n      sell(currentBookWithPictures);\n    }\n  };\n  const handleCancel = () => backToParent(false)();\n\n  return (\n    <Dialog\n      PaperProps={{\n        style: { borderRadius: themedBorderRadius },\n      }}\n      fullScreen={downSmall}\n      fullWidth={true}\n      open={true}\n      onClose={() => {\n        if (!isLoading) handleCancel();\n      }}\n    >\n      <DialogTitle>\n        {bookToEdit ? `Modify '${bookToEdit.title}'` : 'Sell a new book'}\n      </DialogTitle>\n      <DialogContent>\n        <div style={{ padding: 20 }}>\n          <Grid container spacing={4}>\n            <Grid item xs={12}>\n              <ImageDropzone\n                minImages={1}\n                maxImages={4}\n                explanation=\"The first picture is the book cover and looks\n                 best with a ratio of 2:3.\"\n                cols={cols}\n                pictureUrls={pictureUrls.current}\n                addPictureUrl={(urlToAdd) => {\n                  pictureUrls.current = [...pictureUrls.current, urlToAdd];\n                }}\n                removePictureUrl={(urlToRemove) => {\n                  pictureUrls.current = pictureUrls.current.filter(\n                    (url) => url !== urlToRemove\n                  );\n                }}\n                setBlocked={setBlocked}\n                preferDownload={false}\n                uploadEndpoint={uploadBookImage}\n              />\n            </Grid>\n            {!bookToEdit && (\n              <Grid item xs={12}>\n                <TextField\n                  required\n                  color=\"secondary\"\n                  variant=\"outlined\"\n                  fullWidth\n                  error={invalid}\n                  label=\"ISBN\"\n                  defaultValue={bookToEdit?.isbn}\n                  onChange={unwrapEventValue(updateBook('isbn'))}\n                />\n              </Grid>\n            )}\n            {!bookToEdit && (\n              <Grid item xs={12}>\n                <TextField\n                  required\n                  color=\"secondary\"\n                  variant=\"outlined\"\n                  fullWidth\n                  error={invalid}\n                  label=\"Title\"\n                  defaultValue={bookToEdit?.title}\n                  onChange={unwrapEventValue(updateBook('title'))}\n                />\n              </Grid>\n            )}\n            <Grid item xs={12}>\n              <TextField\n                required\n                color=\"secondary\"\n                variant=\"outlined\"\n                fullWidth\n                multiline={true}\n                error={invalid}\n                label=\"Description\"\n                defaultValue={bookToEdit?.description}\n                onChange={unwrapEventValue(updateBook('description'))}\n              />\n            </Grid>\n            <Grid item xs={6}>\n              {currenciesYetToFetch || isLoadingCurrencies ? (\n                <TextField\n                  required\n                  disabled={true}\n                  color=\"secondary\"\n                  variant=\"outlined\"\n                  label=\"Currency\"\n                />\n              ) : (\n                <Autocomplete\n                  fullWidth\n                  renderInput={(params) => (\n                    <TextField\n                      {...params}\n                      required\n                      error={invalid}\n                      color=\"secondary\"\n                      variant=\"outlined\"\n                      label=\"Currency\"\n                    />\n                  )}\n                  options={currencies.map(\n                    (currency) => `${currency.symbol} ${currency.name}`\n                  )}\n                  defaultValue={defaultCurrencyLabel}\n                  onChange={(event, value) =>\n                    updateBook('currency')(value.split(' ')[0])\n                  }\n                />\n              )}\n            </Grid>\n            <Grid item xs={6}>\n              <TextField\n                required\n                color=\"secondary\"\n                variant=\"outlined\"\n                fullWidth\n                error={invalid}\n                label=\"Amount\"\n                type=\"number\"\n                inputProps={{ min: 0 }}\n                defaultValue={bookToEdit?.amount}\n                onChange={(event) =>\n                  updateBook('amount')(parseFloat(event.target.value))\n                }\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <Autocomplete\n                fullWidth\n                renderInput={(params) => (\n                  <TextField\n                    {...params}\n                    required\n                    error={invalid}\n                    color=\"secondary\"\n                    label=\"Condition\"\n                    variant=\"outlined\"\n                  />\n                )}\n                options={Object.keys(bookConditions)}\n                defaultValue={defaultCondition}\n                onChange={(event, value) => updateBook('condition')(value)}\n              />\n            </Grid>\n            {!bookToEdit && (\n              <Grid item xs={12}>\n                <TextField\n                  required\n                  color=\"secondary\"\n                  variant=\"outlined\"\n                  fullWidth\n                  error={invalid}\n                  label=\"Location\"\n                  defaultValue={bookToEdit?.locationName}\n                  onChange={unwrapEventValue(updateBook('locationName'))}\n                />\n              </Grid>\n            )}\n          </Grid>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n          spacing={2}\n        >\n          <Grid item>\n            <Button onClick={handleCancel} disabled={isLoading}>\n              Cancel\n            </Button>\n            <Button onClick={handleConfirm} disabled={isLoading || isBlocked}>\n              {bookToEdit ? 'Modify' : 'Sell'}\n            </Button>\n          </Grid>\n          {isLoading && (\n            <Grid item style={{ paddingLeft: '24px' }}>\n              <CircularProgress\n                variant=\"indeterminate\"\n                disableShrink\n                color=\"secondary\"\n                size={20}\n                thickness={4}\n              />\n            </Grid>\n          )}\n        </Grid>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react';\nimport {\n  Button,\n  CircularProgress,\n  Grid,\n  makeStyles,\n  Paper,\n  Typography,\n} from '@material-ui/core';\nimport BookCard from '../BookCard';\nimport { themedBorderRadius } from '../../theming';\n\nconst useStyles = makeStyles((theme) => ({\n  card: {\n    padding: theme.spacing(2),\n    margin: theme.spacing(2),\n    borderRadius: themedBorderRadius,\n  },\n  cardButton: {\n    width: '100%',\n  },\n}));\n\nexport default function ConfirmCard({\n  book,\n  bookError,\n  confirm,\n  confirmError,\n  isLoadingBook,\n  isLoadingConfirm,\n  onRetry,\n  onConfirm,\n}) {\n  const classes = useStyles();\n  const error = bookError || confirmError;\n\n  return (\n    <Paper className={classes.card} variant=\"outlined\">\n      <Grid container>\n        <Grid item>{isLoadingBook && <CircularProgress />}</Grid>\n        <Grid item>{error && <Error onRetry={onRetry} />}</Grid>\n        <Grid item>\n          {!error && book && (\n            <Success\n              book={book}\n              confirm={confirm}\n              isLoadingConfirm={isLoadingConfirm}\n              onConfirm={onConfirm}\n            />\n          )}\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n}\n\nfunction Error({ onRetry }) {\n  const classes = useStyles();\n\n  return (\n    <Grid container direction=\"column\" spacing={2}>\n      <Grid item>\n        <Typography variant=\"subtitle1\">A problem occurred!</Typography>\n        <Typography variant=\"subtitle2\">\n          The transaction might be expired. If that&apos;s the case, ask the\n          seller to create a new sell link for you. Keep in mind that you cannot\n          confirm your own sell links.\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Button\n          className={classes.cardButton}\n          color=\"primary\"\n          variant=\"contained\"\n          disableElevation={true}\n          onClick={onRetry}\n        >\n          Try again\n        </Button>\n      </Grid>\n    </Grid>\n  );\n}\n\nfunction Success({ book, confirm, isLoadingConfirm, onConfirm }) {\n  const classes = useStyles();\n\n  return (\n    <Grid container direction=\"column\" spacing={2}>\n      <Grid item>\n        <Typography variant=\"body1\">\n          You are asked to confirm the selling of <b>{book.title}</b>\n        </Typography>\n      </Grid>\n      <Grid item>\n        <BookCard book={book} />\n      </Grid>\n      <Grid item>\n        {!confirm && isLoadingConfirm && <CircularProgress />}\n        {!confirm && !isLoadingConfirm && (\n          <Button\n            className={classes.cardButton}\n            color=\"primary\"\n            variant=\"contained\"\n            disableElevation={true}\n            onClick={() => onConfirm()}\n          >\n            Confirm selling\n          </Button>\n        )}\n        {confirm && (\n          <Typography variant=\"subtitle2\">\n            Selling confirmed successfully!\n          </Typography>\n        )}\n      </Grid>\n    </Grid>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ConfirmCard from 'components/ConfirmCard';\nimport { useAxios } from 'hooks/axios';\nimport { confirmSell, getBookByTransaction } from 'api/books';\n\nconst useStyles = makeStyles({\n  container: {\n    width: '100vw',\n    height: '100vh',\n  },\n});\n\nexport default function Confirm() {\n  const classes = useStyles();\n  const { transactionId } = useParams();\n  const [\n    fGetBookByTransaction,\n    cGetBookByTransaction,\n    book,\n    bookError,\n    isLoadingBook,\n  ] = useAxios(getBookByTransaction);\n  const [\n    fConfirmSell,\n    cConfirmSell,\n    confirm,\n    confirmError,\n    isLoadingConfirm,\n  ] = useAxios(confirmSell);\n\n  useEffect(() => {\n    fGetBookByTransaction(transactionId);\n    return () => cGetBookByTransaction();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [transactionId]);\n\n  const onRetry = () => {\n    // We might retry just because the confirmation failed.\n    // Therefore, cancel the confirmation to reset 'confirmError'.\n    cConfirmSell();\n    cGetBookByTransaction();\n    fGetBookByTransaction(transactionId);\n  };\n\n  const onConfirm = () => {\n    cConfirmSell();\n    fConfirmSell(transactionId);\n  };\n\n  return (\n    <Grid\n      className={classes.container}\n      container\n      alignItems=\"center\"\n      justify=\"center\"\n    >\n      <Grid item>\n        <ConfirmCard\n          book={book}\n          bookError={bookError}\n          confirm={confirm}\n          confirmError={confirmError}\n          isLoadingBook={isLoadingBook}\n          isLoadingConfirm={isLoadingConfirm}\n          onRetry={onRetry}\n          onConfirm={onConfirm}\n        />\n      </Grid>\n    </Grid>\n  );\n}\n","import Landing from 'screens/Landing';\nimport Explore from 'screens/Explore';\nimport Sell from 'screens/Sell';\nimport Profile from 'screens/Profile';\nimport Book from 'screens/Book';\nimport Dashboard from 'screens/Dashboard';\nimport Authorization from 'screens/Authorization';\nimport BookEditSellDialog from 'components/BookEditSellDialog';\nimport { BookRemoveDialog } from 'screens/Sell/Sell.jsx';\nimport Confirm from 'screens/Confirm';\nimport BookLinkDialog from 'components/BookLinkDialog';\nimport EditProfilePictureDialog from 'components/profile/EditProfilePictureDialog';\nimport EditProfileDialog from 'components/profile/EditProfileDialog';\nimport {\n  AUTH_ROUTE,\n  BOOK_ROUTE,\n  CONFIRM_ROUTE,\n  DASHBOARD_ROUTE,\n  EDIT_PROFILE_PICTURE_ROUTE,\n  EDIT_PROFILE_ROUTE,\n  EDIT_SELL_ROUTE,\n  EXPLORE_ROUTE,\n  LANDING_ROUTE,\n  LINK_SELL_ROUTE,\n  NEW_SELL_ROUTE,\n  PROFILE_ROUTE,\n  REMOVE_SELL_ROUTE,\n  SELL_ROUTE,\n} from './helpers';\nimport RoutePrivilege from './privileges';\n\nconst routes = [\n  {\n    path: LANDING_ROUTE,\n    isExact: true,\n    privilege: RoutePrivilege.ANYONE,\n    component: Landing,\n  },\n  {\n    path: CONFIRM_ROUTE,\n    isExact: true,\n    privilege: RoutePrivilege.AUTHENTICATED,\n    component: Confirm,\n  },\n  {\n    path: AUTH_ROUTE,\n    isExact: true,\n    privilege: RoutePrivilege.GUEST,\n    component: Authorization,\n  },\n  {\n    path: BOOK_ROUTE,\n    isExact: true,\n    privilege: RoutePrivilege.AUTHENTICATED,\n    component: Book,\n  },\n  {\n    path: DASHBOARD_ROUTE,\n    isExact: false,\n    privilege: RoutePrivilege.AUTHENTICATED,\n    component: Dashboard,\n    routes: [\n      {\n        path: EXPLORE_ROUTE,\n        isExact: false,\n        privilege: RoutePrivilege.AUTHENTICATED,\n        component: Explore,\n      },\n      {\n        path: SELL_ROUTE,\n        isExact: false,\n        privilege: RoutePrivilege.AUTHENTICATED,\n        component: Sell,\n        routes: [\n          {\n            path: NEW_SELL_ROUTE,\n            isExact: false,\n            privilege: RoutePrivilege.AUTHENTICATED,\n            component: BookEditSellDialog,\n          },\n          {\n            path: EDIT_SELL_ROUTE,\n            isExact: false,\n            privilege: RoutePrivilege.AUTHENTICATED,\n            component: BookEditSellDialog,\n          },\n          {\n            path: REMOVE_SELL_ROUTE,\n            isExact: false,\n            privilege: RoutePrivilege.AUTHENTICATED,\n            component: BookRemoveDialog,\n          },\n          {\n            path: LINK_SELL_ROUTE,\n            isExact: false,\n            privilege: RoutePrivilege.AUTHENTICATED,\n            component: BookLinkDialog,\n          },\n        ],\n      },\n      {\n        path: PROFILE_ROUTE,\n        isExact: false,\n        privilege: RoutePrivilege.AUTHENTICATED,\n        component: Profile,\n        routes: [\n          {\n            path: EDIT_PROFILE_ROUTE,\n            isExact: false,\n            isProtected: true,\n            component: EditProfileDialog,\n          },\n          {\n            path: EDIT_PROFILE_PICTURE_ROUTE,\n            isExact: false,\n            isProtected: true,\n            component: EditProfilePictureDialog,\n          },\n        ],\n      },\n    ],\n  },\n];\n\nexport default routes;\n","import React from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport Routes from 'components/routing/Routes';\nimport Navigation from 'components/Navigation';\n\nexport default function Dashboard({ routes }) {\n  const history = useHistory();\n  const location = useLocation();\n\n  const changeSection = (newSection) => {\n    history.push(newSection);\n  };\n\n  return (\n    <Navigation selectedRoute={location.pathname} changeSection={changeSection}>\n      <Routes routes={routes} />\n    </Navigation>\n  );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport { useAxios } from 'hooks/axios';\nimport { getSellLink } from 'api/books';\nimport { Box, CircularProgress } from '@material-ui/core';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport { green } from '@material-ui/core/colors';\nimport { themedBorderRadius } from '../../theming';\n\nexport default function BookLinkDialog({ backToParent, bookToLink }) {\n  const [link, setLink] = useState('');\n  const linkFieldRef = useRef(null);\n  const [generateLink, cancelGeneration, , , isGenerating] = useAxios(\n    getSellLink,\n    'generating the sell link',\n    (linkData) => {\n      setLink(linkData?.link || '');\n      linkFieldRef.current.focus();\n    }\n  );\n  const handleClose = () => backToParent(false)();\n  useEffect(() => {\n    generateLink(bookToLink.bookId);\n    return () => cancelGeneration();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Dialog\n      PaperProps={{\n        style: { borderRadius: themedBorderRadius },\n      }}\n      open={true}\n    >\n      <DialogTitle align=\"center\">\n        {isGenerating\n          ? `Generating your sell link for '${bookToLink.title}'...`\n          : 'Sell link copied to the clipboard'}\n      </DialogTitle>\n      <DialogContent>\n        <div style={{ padding: 20 }}>\n          <Grid\n            container\n            direction=\"column\"\n            spacing={2}\n            alignItems=\"center\"\n            justify=\"center\"\n          >\n            <Grid item xs={12}>\n              {isGenerating ? (\n                <CircularProgress\n                  variant=\"indeterminate\"\n                  disableShrink\n                  color=\"secondary\"\n                  size={30}\n                  thickness={4}\n                />\n              ) : (\n                <CheckCircleIcon style={{ color: green[500], fontSize: 40 }} />\n              )}\n            </Grid>\n            {!isGenerating && (\n              <Grid item xs={12} style={{ width: '100%' }}>\n                <Box m=\"auto\" style={{ width: '100%' }}>\n                  <TextField\n                    fullWidth\n                    variant=\"outlined\"\n                    size=\"small\"\n                    InputProps={{\n                      readOnly: true,\n                    }}\n                    inputProps={{\n                      style: { textAlign: 'center' },\n                      ref: linkFieldRef,\n                    }}\n                    onFocus={(e) => {\n                      // Select the whole text\n                      e.target.select();\n                      // Copy to clipboard\n                      document.execCommand('copy');\n                    }}\n                    value={link}\n                  />\n                </Box>\n              </Grid>\n            )}\n          </Grid>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n          spacing={2}\n        >\n          <Grid item>\n            <Button onClick={handleClose} disabled={isGenerating}>\n              Close\n            </Button>\n          </Grid>\n        </Grid>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  Button,\n  CircularProgress,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  TextField,\n  useMediaQuery,\n} from '@material-ui/core';\nimport { buildObjectFromFields, imprintObject } from 'utils/functions';\nimport { useAxios } from 'hooks/axios';\nimport { editProfile } from 'api/profile';\nimport { themedBorderRadius } from '../../../theming';\n\nconst unwrapEventValue = (block) => (event) => {\n  block(event.target.value);\n};\n\nexport default function EditProfileDialog({\n  backToProfile,\n  isDataLoaded,\n  fields,\n}) {\n  const downSmall = useMediaQuery((theme) =>\n    theme.breakpoints.down(theme.breakpoints.values.sm)\n  );\n\n  const [profileDetails, setProfileDetails] = useState(() =>\n    buildObjectFromFields(fields)\n  );\n\n  const [fEditProfile, , , , isLoading] = useAxios(\n    editProfile,\n    'editing the profile',\n    () => backToProfile(true)\n  );\n\n  const updateProfileDetails = (fieldName) => (value) => {\n    setProfileDetails({\n      ...profileDetails,\n      [fieldName]: value,\n    });\n  };\n\n  const handleCancel = () => backToProfile(false);\n\n  const handleUpdate = () => {\n    // Dirty way for not including the profile picture when editing the profile\n    const cleanProfileDetails = { ...profileDetails };\n    delete cleanProfileDetails.profilePicture;\n    fEditProfile(imprintObject(cleanProfileDetails));\n  };\n\n  /*\n  If there is nothing to show, because the user visited this route manually,\n  go back the the profile page\n   */\n  if (!isDataLoaded) {\n    handleCancel();\n  }\n\n  return (\n    <Dialog\n      PaperProps={{\n        style: { borderRadius: themedBorderRadius },\n      }}\n      fullScreen={downSmall}\n      fullWidth={true}\n      open={true}\n      onClose={() => {\n        if (!isLoading) handleCancel();\n      }}\n    >\n      <DialogTitle>Update your profile</DialogTitle>\n      <DialogContent>\n        <div style={{ padding: 20 }}>\n          <Grid container spacing={4}>\n            {fields.map((field, index) => (\n              <Grid item key={index} xs={field.space}>\n                <TextField\n                  required={field.isRequired}\n                  color=\"secondary\"\n                  variant=\"outlined\"\n                  fullWidth\n                  label={field.displayName}\n                  defaultValue={profileDetails[field.name]}\n                  onChange={unwrapEventValue(updateProfileDetails(field.name))}\n                />\n              </Grid>\n            ))}\n          </Grid>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n          spacing={2}\n        >\n          <Grid item>\n            <Button onClick={handleCancel} disabled={isLoading}>\n              Cancel\n            </Button>\n            <Button onClick={handleUpdate} disabled={isLoading}>\n              Update\n            </Button>\n          </Grid>\n          {isLoading && (\n            <Grid item style={{ paddingLeft: '24px' }}>\n              <CircularProgress\n                variant=\"indeterminate\"\n                disableShrink\n                color=\"secondary\"\n                size={20}\n                thickness={4}\n              />\n            </Grid>\n          )}\n        </Grid>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  Button,\n  CircularProgress,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n} from '@material-ui/core';\nimport { removeProfilePicture, uploadProfilePicture } from 'api/profile';\nimport ImageDropzone from 'components/ImageDropzone';\nimport { useAxios } from 'hooks/axios';\nimport { themedBorderRadius } from 'theming';\n\nexport default function EditProfilePictureDialog({\n  backToProfile,\n  isDataLoaded,\n  profilePicture,\n}) {\n  const [isBlocked, setBlocked] = useState(false);\n  const [doRemovePicture, , , , isLoading] = useAxios(\n    removeProfilePicture,\n    'remove the profile picture'\n  );\n\n  const handleClose = () => backToProfile(true);\n\n  /*\n  If there is nothing to show, because the user visited this route manually,\n  go back the the profile page\n   */\n  if (!isDataLoaded) {\n    handleClose();\n  }\n\n  return (\n    <Dialog\n      PaperProps={{\n        style: { borderRadius: themedBorderRadius },\n      }}\n      fullScreen={false}\n      fullWidth={true}\n      open={true}\n      onClose={() => {\n        if (!isBlocked) handleClose();\n      }}\n    >\n      <DialogTitle>Update your profile picture</DialogTitle>\n      <DialogContent>\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <ImageDropzone\n              minImages={0}\n              maxImages={1}\n              explanation=\"The picture is cropped down to a square.\"\n              // We embed the single picture into an array\n              pictureUrls={profilePicture ? [profilePicture] : []}\n              addPictureUrl={handleClose}\n              removePictureUrl={doRemovePicture}\n              setBlocked={setBlocked}\n              uploadEndpoint={uploadProfilePicture}\n              preferDownload={true}\n              cols={1}\n            />\n          </Grid>\n        </Grid>\n      </DialogContent>\n      <DialogActions>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justify=\"space-between\"\n          alignItems=\"center\"\n          spacing={2}\n        >\n          <Grid item>\n            <Button onClick={handleClose} disabled={isLoading || isBlocked}>\n              Close\n            </Button>\n          </Grid>\n          {isLoading && (\n            <Grid item style={{ paddingLeft: '24px' }}>\n              <CircularProgress\n                variant=\"indeterminate\"\n                disableShrink\n                color=\"secondary\"\n                size={20}\n                thickness={4}\n              />\n            </Grid>\n          )}\n        </Grid>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport theme from 'theming';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { SnackbarProvider } from 'notistack';\nimport ProvideAuth from './components/ProvideAuth';\nimport Routes from './components/routing/Routes';\nimport routes from './routing';\n\nexport default function Main() {\n  return (\n    <MuiThemeProvider theme={theme}>\n      <SnackbarProvider maxSnack={3}>\n        <ProvideAuth>\n          <Router>\n            <Routes routes={routes} />\n          </Router>\n        </ProvideAuth>\n      </SnackbarProvider>\n    </MuiThemeProvider>\n  );\n}\n","// Font used by Material-UI, in all the required weights\nimport '@fontsource/roboto/300.css';\nimport '@fontsource/roboto/400.css';\nimport '@fontsource/roboto/500.css';\nimport '@fontsource/roboto/700.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { CssBaseline } from '@material-ui/core';\nimport Main from 'Main.jsx';\n\nReactDOM.render(\n  <>\n    <CssBaseline />\n    <Main />\n  </>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}